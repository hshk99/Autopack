{
  "phases": [
    {
      "id": "fileorg-p2-test-fixes",
      "description": "Stabilize the backend test suite by resolving dependency pin conflicts (fastapi/starlette/httpx), updating pytest.ini as needed, and ensuring all backend tests execute cleanly.",
      "task_category": "tests",
      "complexity": "low",
      "acceptance_criteria": [
        "All backend tests pass without dependency errors.",
        "requirements.txt pinned to compatible versions for fastapi/starlette/httpx/pytest.",
        "pytest.ini configured appropriately (asyncio mode, warnings)."
      ],
      "scope": {
        "paths": [
          "fileorganizer/backend/tests/",
          "fileorganizer/backend/requirements.txt",
          "fileorganizer/backend/pytest.ini"
        ],
        "read_only_context": [
          "fileorganizer/backend/app/",
          "fileorganizer/backend/models/",
          "fileorganizer/backend/services/"
        ]
      }
    },
    {
      "id": "fileorg-p2-frontend-build",
      "description": "Set up and verify the frontend build system: install dependencies, produce a production build, and validate Electron packaging output.",
      "task_category": "frontend",
      "complexity": "low",
      "builder_mode": "structured_edit",
      "acceptance_criteria": [
        "npm/yarn install succeeds and locks are updated.",
        "Production build artifacts generated (dist/ or equivalent).",
        "Electron package builds successfully for distribution."
      ],
      "scope": {
        "paths": [
          "fileorganizer/frontend/package.json",
          "fileorganizer/frontend/src/",
          "fileorganizer/frontend/vite.config.ts",
          "fileorganizer/frontend/tsconfig.json",
          "fileorganizer/frontend/tsconfig.node.json",
          "fileorganizer/frontend/tailwind.config.js",
          "fileorganizer/frontend/postcss.config.js",
          "fileorganizer/frontend/index.html",
          "fileorganizer/frontend/electron/main.js",
          "fileorganizer/frontend/electron/preload.js",
          "fileorganizer/frontend/.gitignore"
        ],
        "read_only_context": [
          "fileorganizer/frontend/src/",
          "fileorganizer/frontend/package-lock.json"
        ]
      }
    },
    {
      "id": "fileorg-p2-docker",
      "description": "Add Docker deployment assets covering backend and frontend: Dockerfile, docker-compose.yml, .dockerignore, deploy.sh, and smoke-test the stack locally.",
      "task_category": "deployment",
      "complexity": "medium",
      "change_size": "large_refactor",
      "acceptance_criteria": [
        "Backend Dockerfile builds successfully (Python 3.11, dependencies installed).",
        "docker-compose.yml brings up backend + frontend (and db if needed).",
        ".dockerignore excludes venv/node_modules/build artifacts.",
        "deploy.sh runs the compose stack or equivalent automation.",
        "Local docker run verified with a basic health/smoke check."
      ],
      "scope": {
        "paths": [
          "fileorganizer/backend/Dockerfile",
          "fileorganizer/docker-compose.yml",
          "fileorganizer/deploy.sh",
          "fileorganizer/.dockerignore"
        ],
        "read_only_context": [
          "fileorganizer/backend/",
          "fileorganizer/frontend/"
        ]
      }
    },
    {
      "id": "fileorg-p2-country-uk",
      "description": "Create UK-specific pack templates for tax and immigration, plus tests and docs updates.",
      "task_category": "backend",
      "complexity": "medium",
      "allow_mass_addition": true,
      "acceptance_criteria": [
        "tax_uk.yaml contains UK-specific categories/keywords.",
        "immigration_uk.yaml captures UK visa requirements.",
        "Pack loading tests cover UK packs.",
        "User guide updated for UK packs."
      ],
      "scope": {
        "paths": [
          "fileorganizer/backend/packs/tax_uk.yaml",
          "fileorganizer/backend/packs/immigration_uk.yaml",
          "fileorganizer/backend/tests/"
        ],
        "read_only_context": [
          "fileorganizer/backend/packs/",
          "fileorganizer/docs/research/"
        ]
      }
    },
    {
      "id": "fileorg-p2-country-canada",
      "description": "Add Canada-specific pack templates for tax and immigration with validation tests and docs.",
      "task_category": "backend",
      "complexity": "medium",
      "allow_mass_addition": true,
      "acceptance_criteria": [
        "tax_canada.yaml captures Canadian tax categories.",
        "immigration_canada.yaml reflects Canadian visa requirements.",
        "Pack loading tests include Canada packs.",
        "User guide updated for Canada packs."
      ],
      "scope": {
        "paths": [
          "fileorganizer/backend/packs/tax_canada.yaml",
          "fileorganizer/backend/packs/immigration_canada.yaml",
          "fileorganizer/backend/tests/"
        ],
        "read_only_context": [
          "fileorganizer/backend/packs/",
          "fileorganizer/docs/research/"
        ]
      }
    },
    {
      "id": "fileorg-p2-country-australia",
      "description": "Add Australia-specific pack templates for tax and immigration with validation tests and docs.",
      "task_category": "backend",
      "complexity": "medium",
      "allow_mass_addition": true,
      "acceptance_criteria": [
        "tax_australia.yaml captures Australian tax categories.",
        "immigration_australia.yaml reflects Australian visa requirements.",
        "Pack loading tests include Australia packs.",
        "User guide updated for Australia packs."
      ],
      "scope": {
        "paths": [
          "fileorganizer/backend/packs/tax_australia.yaml",
          "fileorganizer/backend/packs/immigration_australia.yaml",
          "fileorganizer/backend/tests/"
        ],
        "read_only_context": [
          "fileorganizer/backend/packs/",
          "fileorganizer/docs/research/"
        ]
      }
    },
    {
      "id": "fileorg-p2-search",
      "description": "Implement advanced search and filtering: add FTS5 indexing, multi-field queries, filters (date, confidence), exports, and frontend UI for advanced search.",
      "task_category": "backend",
      "complexity": "medium",
      "change_size": "large_refactor",
      "builder_mode": "structured_edit",
      "acceptance_criteria": [
        "Backend FTS5 index on documents with multi-field search.",
        "API exposes advanced search with date/confidence filters and export.",
        "Frontend advanced search UI integrated.",
        "Tests validate search queries and filtering."
      ],
      "scope": {
        "paths": [
          "fileorganizer/backend/app/",
          "fileorganizer/backend/tests/",
          "fileorganizer/frontend/src/"
        ],
        "read_only_context": [
          "fileorganizer/backend/db/",
          "fileorganizer/backend/models/"
        ]
      }
    },
    {
      "id": "fileorg-p2-batch-upload",
      "description": "Implement batch upload & processing with background job queue, progress tracking, batch classification, and frontend drag-and-drop UI.",
      "task_category": "backend",
      "complexity": "medium",
      "change_size": "large_refactor",
      "builder_mode": "structured_edit",
      "acceptance_criteria": [
        "Backend batch upload endpoint with job queue and progress tracking.",
        "Batch classification endpoint returns per-file status.",
        "Frontend supports multi-file drag-and-drop and progress indicators.",
        "Concurrent upload tests cover success/failure cases."
      ],
      "scope": {
        "paths": [
          "fileorganizer/backend/app/",
          "fileorganizer/backend/tests/",
          "fileorganizer/frontend/src/"
        ],
        "read_only_context": [
          "fileorganizer/backend/db/",
          "fileorganizer/backend/models/"
        ]
      }
    },
    {
      "id": "fileorg-p2-auth",
      "description": "Add user authentication and multi-user support with JWTs, user-owned documents, protected routes, and migrations, plus frontend login/register flows.",
      "task_category": "backend",
      "complexity": "high",
      "change_size": "large_refactor",
      "acceptance_criteria": [
        "Backend user model, auth endpoints, and JWT token management in place.",
        "Document ownership enforced via user_id relationships and migrations.",
        "Frontend login/register UI and protected routes working.",
        "Auth flow tests and database migration scripts added."
      ],
      "scope": {
        "paths": [
          "fileorganizer/backend/app/",
          "fileorganizer/backend/models/",
          "fileorganizer/backend/tests/",
          "fileorganizer/backend/migrations/",
          "fileorganizer/frontend/src/"
        ],
        "read_only_context": [
          "fileorganizer/backend/db/",
          "fileorganizer/backend/services/"
        ]
      }
    }
  ]
}

