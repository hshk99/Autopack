faiss library not installed; FaissStore will use in-memory fallback
[2025-12-23 22:05:21] INFO: [LOCK] Acquired executor lock for run_id=build132-coverage-delta-integration (PID=66952, host=Harry)
[2025-12-23 22:05:21] INFO: Applying pre-emptive encoding fix...
[2025-12-23 22:05:21] INFO: [Recovery] Fixing Unicode encoding error...
[2025-12-23 22:05:21] INFO: [Recovery] SUCCESS: Encoding fixed (UTF-8 enabled)
[2025-12-23 22:05:21] INFO: Database tables initialized
[2025-12-23 22:05:21] INFO: Loaded BuilderOutputConfig: max_lines_for_full_file=1000, max_lines_hard_limit=1000
[2025-12-23 22:05:21] INFO: Doctor execute_fix enabled: True
[2025-12-23 22:05:21] INFO: FileSizeTelemetry initialized: .autonomous_runs\autopack\file_size_telemetry.jsonl
[2025-12-23 22:05:27] INFO: [Qdrant] Connected to localhost:6333
[2025-12-23 22:05:27] INFO: [MemoryService] Using Qdrant backend
[2025-12-23 22:05:31] ERROR: [Qdrant] Failed to ensure collection 'code_docs': [WinError 10061] No connection could be made because the target machine actively refused it
[2025-12-23 22:05:31] WARNING: MemoryService initialization failed, running without memory: [WinError 10061] No connection could be made because the target machine actively refused it
[2025-12-23 22:05:31] INFO: [FileLayout] Project: autopack, Family: build132-coverage-delta-integration, Base: .autonomous_runs\autopack\runs\build132-coverage-delta-integration
[2025-12-23 22:05:31] INFO: Initialized autonomous executor for run: build132-coverage-delta-integration
[2025-12-23 22:05:31] INFO: API URL: http://localhost:8000
[2025-12-23 22:05:31] INFO: Workspace: .
[2025-12-23 22:05:31] INFO: Running proactive startup checks from DEBUG_JOURNAL.md...
[2025-12-23 22:05:31] INFO: [HIGH] Checking: Windows Unicode Fix (PYTHONUTF8)
[2025-12-23 22:05:31] INFO:   Reason: Prevents UnicodeEncodeError with emoji characters in logs (Issue #3)
[2025-12-23 22:05:31] INFO:   Check PASSED
[2025-12-23 22:05:31] INFO: [SchemaValidator] Starting database schema validation...
[2025-12-23 22:05:31] INFO: [SchemaValidator] âœ… Database schema validation PASSED
[2025-12-23 22:05:31] INFO: Startup checks complete
[2025-12-23 22:05:32] INFO: [BUILD-123v2] Manifest generator initialized (deterministic scope generation)
[2025-12-23 22:05:32] INFO: [HealthCheck:T0] API Keys: PASSED (0ms) - All required API keys present
[2025-12-23 22:05:32] INFO: [HealthCheck:T0] Database: PASSED (0ms) - Database accessible: C:\dev\Autopack\autopack.db
[2025-12-23 22:05:32] INFO: [HealthCheck:T0] Workspace: PASSED (0ms) - Workspace valid: C:\dev\Autopack
[2025-12-23 22:05:32] INFO: [HealthCheck:T0] Config: PASSED (25ms) - Configuration files valid
[2025-12-23 22:05:32] INFO: [BUILD-127] Completion authority initialized (PhaseFinalizer + TestBaselineTracker)
[2025-12-23 22:05:32] INFO: [BUILD-127] Capturing T0 baseline at commit 238d87d5...
[2025-12-23 22:05:32] INFO: [Baseline] Capturing baseline for commit 238d87d5
[2025-12-23 22:05:59] INFO: [Baseline] Captured: 0/0 passing, 0 failing, 0 errors
[2025-12-23 22:05:59] INFO: [BUILD-127] T0 baseline: 0 tests, 0 passing, 0 failing, 0 errors
[2025-12-23 22:05:59] INFO: Starting autonomous execution loop...
[2025-12-23 22:05:59] INFO: Poll interval: 10s
[2025-12-23 22:05:59] INFO: API server is already running
[2025-12-23 22:05:59] INFO: Initializing infrastructure...
[2025-12-23 22:06:02] INFO: LlmService: Initialized with ModelRouter and UsageRecorder
[2025-12-23 22:06:02] INFO: Quality Gate: Initialized
[2025-12-23 22:06:02] INFO: Iteration 1: Fetching run status...
[2025-12-23 22:06:02] INFO: [BUILD-041] Next phase: build132-phase1-enable-coverage
[2025-12-23 22:06:02] INFO: [BUILD-123v2] Phase 'build132-phase1-enable-coverage' has no scope - generating manifest...
[2025-12-23 22:06:02] INFO: Generating manifest for run: build132-coverage-delta-integration
[2025-12-23 22:06:02] INFO: Repo structure scanned successfully
[2025-12-23 22:06:02] INFO: [BUILD-128] Phase 'build132-phase1-enable-coverage' has deliverables - inferring scope from deliverables
[2025-12-23 22:06:02] INFO: [BUILD-128] Inferred category 'unknown' from deliverables (confidence=0.0%)
[2025-12-23 22:06:02] INFO: [BUILD-128] Generated scope: 2 paths, 0 context files
[2025-12-23 22:06:02] INFO: [BUILD-129] Added token estimate to phase: 462 output tokens (2 deliverables, confidence=0.80)
[2025-12-23 22:06:02] INFO: [BUILD-123v2] Generated scope for 'build132-phase1-enable-coverage': category=unknown, confidence=0.0%, files=2
[2025-12-23 22:06:02] WARNING: [BUILD-123v2] Low confidence (0.0%) for phase 'build132-phase1-enable-coverage' - scope may be incomplete. Builder may need to request expansion.
[2025-12-23 22:06:02] WARNING: [Scope] Could not determine workspace from scope paths, using default: .
[2025-12-23 22:06:02] INFO: [build132-phase1-enable-coverage] Step 1/4: Generating code with Builder (via LlmService)...
[2025-12-23 22:06:02] WARNING: [Scope] Could not determine workspace from scope paths, using default: .
[2025-12-23 22:06:02] INFO: [Scope] Loaded 2 files from scope configuration
[2025-12-23 22:06:02] INFO: [Scope] Scope paths: ['pytest.ini', '.gitignore']
[2025-12-23 22:06:02] INFO: [Scope] Loaded paths: ['pytest.ini', '.gitignore']...
[2025-12-23 22:06:02] INFO: [build132-phase1-enable-coverage] Loaded 2 files for context
[2025-12-23 22:06:02] WARNING: [Scope] Could not determine workspace from scope paths, using default: .
[2025-12-23 22:06:02] INFO: [Scope] Validation passed: 2 files match scope configuration
[2025-12-23 22:06:02] INFO: [build132-phase1-enable-coverage] Built deliverables contract: 2 required paths, 0 forbidden patterns
[2025-12-23 22:06:02] INFO: [build132-phase1-enable-coverage] Deliverables manifest gate PASSED (2 paths)
[2025-12-23 22:06:02] INFO: [ModelSelector] Selected claude-sonnet-4-5 for builder (complexity=low, attempt=0, intra_tier=0)
[2025-12-23 22:06:02] INFO: [MODEL-SELECT] Builder: model=claude-sonnet-4-5, complexity=low->low, attempt=0, category=configuration
[2025-12-23 22:06:02] INFO: [TokenEstimator] Budget selection: base=8192, estimated=462, with_buffer=554, selected=8192, confidence=80.0%
[2025-12-23 22:06:02] INFO: [BUILD-129] Token estimate: 462 output tokens (2 deliverables, confidence=0.80), selected budget: 8192
[2025-12-23 22:06:02] WARNING: CONSOLIDATED_DEBUG.md not found at C:\dev\Autopack\.autonomous_runs\file-organizer-app-v1\archive\CONSOLIDATED_DEBUG.md
[2025-12-23 22:06:02] WARNING: [TOKEN_SOFT_CAP] run_id=unknown phase_id=build132-phase1-enable-coverage est_total=12822 soft_cap=12000 (prompt=1354 completion=11468 complexity=low)
[2025-12-23 22:06:05] INFO: HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
[2025-12-23 22:06:11] INFO: [TOKEN_BUDGET] phase=build132-phase1-enable-coverage complexity=low input=1605 output=742/16384 total=2347 utilization=4.5% model=claude-sonnet-4-5
[2025-12-23 22:06:12] INFO: [TokenEstimationV2] predicted_output=462 actual_output=742 smape=46.5% selected_budget=8192 category=configuration complexity=low deliverables=2 success=False stop_reason=end_turn truncated=False model=claude-sonnet-4-5
[2025-12-23 22:06:12] ERROR: [build132-phase1-enable-coverage] Builder failed: No valid file changes generated
[2025-12-23 22:06:12] ERROR: [build132-phase1-enable-coverage] Patch validation failed (422): [{'type': 'missing', 'loc': ['body', 'phase_id'], 'msg': 'Field required', 'input': {'success': False, 'output': '', 'files_modified': [], 'metadata': {'phase_id': 'build132-phase1-enable-coverage', 'run_id': 'build132-coverage-delta-integration', 'run_type': 'project_build', 'lines_added': 0, 'lines_removed': 0, 'builder_attempts': 1, 'tokens_used': 2347, 'duration_minutes': 0.0, 'probe_results': [], 'suggested_issues': [], 'notes': 'No valid file changes generated', 'allowed_paths': ['./']}}, 'url': 'https://errors.pydantic.dev/2.7/v/missing'}, {'type': 'missing', 'loc': ['body', 'run_id'], 'msg': 'Field required', 'input': {'success': False, 'output': '', 'files_modified': [], 'metadata': {'phase_id': 'build132-phase1-enable-coverage', 'run_id': 'build132-coverage-delta-integration', 'run_type': 'project_build', 'lines_added': 0, 'lines_removed': 0, 'builder_attempts': 1, 'tokens_used': 2347, 'duration_minutes': 0.0, 'probe_results': [], 'suggested_issues': [], 'notes': 'No valid file changes generated', 'allowed_paths': ['./']}}, 'url': 'https://errors.pydantic.dev/2.7/v/missing'}, {'type': 'missing', 'loc': ['body', 'status'], 'msg': 'Field required', 'input': {'success': False, 'output': '', 'files_modified': [], 'metadata': {'phase_id': 'build132-phase1-enable-coverage', 'run_id': 'build132-coverage-delta-integration', 'run_type': 'project_build', 'lines_added': 0, 'lines_removed': 0, 'builder_attempts': 1, 'tokens_used': 2347, 'duration_minutes': 0.0, 'probe_results': [], 'suggested_issues': [], 'notes': 'No valid file changes generated', 'allowed_paths': ['./']}}, 'url': 'https://errors.pydantic.dev/2.7/v/missing'}]
[2025-12-23 22:06:12] INFO: [build132-phase1-enable-coverage] Phase 2.3: Validation errors indicate malformed patch - LLM should regenerate
[2025-12-23 22:06:12] INFO: [ARCHIVE_CONSOLIDATOR] Logged new error: Patch validation failure (422)
[2025-12-23 22:06:12] WARNING: Failed to post builder result: 422 Client Error: Unprocessable Entity for url: http://localhost:8000/runs/build132-coverage-delta-integration/phases/build132-phase1-enable-coverage/builder_result
[2025-12-23 22:06:12] INFO: [ARCHIVE_CONSOLIDATOR] Logged new error: API failure: POST builder_result
[2025-12-23 22:06:12] INFO: Updated phase build132-phase1-enable-coverage status to FAILED
[2025-12-23 22:06:12] WARNING: Failed to write run_summary from executor: name 'models' is not defined
[2025-12-23 22:06:24] INFO: [RetrievalTrigger] Phase build132-phase1-enable-coverage attempt 1: Error messages lack context - triggering deep retrieval
[2025-12-23 22:06:24] INFO: [DeepRetrieval] Starting bounded retrieval for phase build132-phase1-enable-coverage (priority=medium)
[2025-12-23 22:06:25] INFO: [DeepRetrieval] Retrieved 0 run artifacts (0 bytes), 1 SOT files (15360 bytes), 0 memory entries (0 bytes)
[2025-12-23 22:06:25] WARNING: [build132-phase1-enable-coverage] Attempt 1/5 failed, will escalate model for next retry
[2025-12-23 22:06:25] WARNING: Phase build132-phase1-enable-coverage finished with status: FAILED
[2025-12-23 22:06:25] INFO: Waiting 10s before next phase...
[2025-12-23 22:06:35] INFO: Iteration 2: Fetching run status...
[2025-12-23 22:06:35] INFO: [BUILD-041] Next phase: build132-phase2-coverage-tracker
[2025-12-23 22:06:35] INFO: [BUILD-123v2] Phase 'build132-phase2-coverage-tracker' has no scope - generating manifest...
[2025-12-23 22:06:35] INFO: Generating manifest for run: build132-coverage-delta-integration
[2025-12-23 22:06:35] INFO: Repo structure scanned successfully
[2025-12-23 22:06:35] INFO: [BUILD-128] Phase 'build132-phase2-coverage-tracker' has deliverables - inferring scope from deliverables
[2025-12-23 22:06:35] INFO: [BUILD-128] Inferred category 'backend' from deliverables (confidence=50.0%)
[2025-12-23 22:06:35] INFO: [BUILD-128] Generated scope: 2 paths, 1 context files
[2025-12-23 22:06:35] INFO: [BUILD-129] Added token estimate to phase: 858 output tokens (2 deliverables, confidence=0.80)
[2025-12-23 22:06:35] ERROR: Plan validation failed: Phase 'build132-phase2-coverage-tracker' validation failed: Protected paths in scope: src/autopack/coverage_tracker.py...
[2025-12-23 22:06:35] WARNING: [BUILD-123v2] Manifest generation failed for 'build132-phase2-coverage-tracker': Phase 'build132-phase2-coverage-tracker' validation failed: Protected paths in scope: src/autopack/coverage_tracker.py...
[2025-12-23 22:06:35] INFO: [build132-phase2-coverage-tracker] Step 1/4: Generating code with Builder (via LlmService)...
[2025-12-23 22:06:35] INFO: [Context] Loaded 3 recently modified files for fresh context
[2025-12-23 22:06:35] INFO: [Context] Loaded 1 files mentioned in phase description
[2025-12-23 22:06:35] INFO: [Context] Total: 17 files loaded for Builder context (modified=3, mentioned=1)
[2025-12-23 22:06:35] INFO: [TOKEN_BUDGET] Context loading: ~19999 tokens (99% of 20000 budget)
[2025-12-23 22:06:35] INFO: [build132-phase2-coverage-tracker] Loaded 17 files for context
[2025-12-23 22:06:35] INFO: [ModelSelector] Selected claude-sonnet-4-5 for builder (complexity=medium, attempt=0, intra_tier=0)
[2025-12-23 22:06:35] INFO: [MODEL-SELECT] Builder: model=claude-sonnet-4-5, complexity=medium->medium, attempt=0, category=implementation
[2025-12-23 22:06:35] INFO: [TokenEstimator] Budget selection: base=12288, estimated=822, with_buffer=986, selected=12288, confidence=80.0%
[2025-12-23 22:06:35] INFO: [BUILD-129] Token estimate: 822 output tokens (2 deliverables, confidence=0.80), selected budget: 12288
[2025-12-23 22:06:35] WARNING: CONSOLIDATED_DEBUG.md not found at C:\dev\Autopack\.autonomous_runs\file-organizer-app-v1\archive\CONSOLIDATED_DEBUG.md
[2025-12-23 22:06:35] WARNING: [TOKEN_SOFT_CAP] run_id=unknown phase_id=build132-phase2-coverage-tracker est_total=35195 soft_cap=32000 (prompt=23727 completion=11468 complexity=medium)
[2025-12-23 22:06:38] INFO: HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
[2025-12-23 22:07:12] INFO: [TOKEN_BUDGET] phase=build132-phase2-coverage-tracker complexity=medium input=31866 output=3137/16384 total=35003 utilization=19.1% model=claude-sonnet-4-5
[2025-12-23 22:07:12] INFO: [Builder] Generated 2 file diffs locally from full-file content
[2025-12-23 22:07:12] INFO: [TokenEstimationV2] predicted_output=822 actual_output=3137 smape=116.9% selected_budget=12288 category=implementation complexity=medium deliverables=2 success=True stop_reason=end_turn truncated=False model=claude-sonnet-4-5
[2025-12-23 22:07:12] INFO: [build132-phase2-coverage-tracker] Builder succeeded (35003 tokens)
[2025-12-23 22:07:12] INFO: [build132-phase2-coverage-tracker] No deliverables specified in scope, skipping validation
[2025-12-23 22:07:12] ERROR: [build132-phase2-coverage-tracker] Patch validation failed (422): [{'type': 'missing', 'loc': ['body', 'phase_id'], 'msg': 'Field required', 'input': {'success': True, 'output': 'diff --git a/src/autopack/coverage_tracker.py b/src/autopack/coverage_tracker.py\nnew file mode 100644\nindex 0000000..1111111\n--- /dev/null\n+++ b/src/autopack/coverage_tracker.py\n@@ -0,0 +1,150 @@\n+"""Coverage delta calculation for Quality Gate.\n+\n+Tracks test coverage changes relative to baseline for quality assessment.\n+"""\n+\n+import json\n+import logging\n+from pathlib import Path\n+from typing import Optional, Dict, Tuple\n+\n+logger = logging.getLogger(__name__)\n+\n+\n+class CoverageTracker:\n+    """Calculate coverage delta for Quality Gate."""\n+\n+    def __init__(self, workspace_root: Path):\n+        """Initialize coverage tracker.\n+\n+        Args:\n+            workspace_root: Root directory of the workspace\n+        """\n+        self.workspace_root = workspace_root\n+        self.baseline_path = workspace_root / ".coverage_baseline.json"\n+        self.current_path = workspace_root / ".coverage.json"\n+\n+    def get_baseline_coverage(self) -> Optional[float]:\n+        """Load baseline coverage from T0 snapshot.\n+\n+        Returns:\n+            Baseline coverage percentage, or None if not found\n+        """\n+        if not self.baseline_path.exists():\n+            logger.warning(\n+                f"[CoverageTracker] Baseline not found at {self.baseline_path}. "\n+                f"Run \'pytest --cov\' and save .coverage.json as .coverage_baseline.json"\n+            )\n+            return None\n+\n+        try:\n+            data = json.loads(self.baseline_path.read_text())\n+            return self._extract_coverage_percentage(data)\n+        except Exception as e:\n+            logger.error(f"[CoverageTracker] Failed to load baseline: {e}")\n+            return None\n+\n+    def get_current_coverage(self) -> Optional[float]:\n+        """Extract coverage from most recent test run.\n+\n+        Returns:\n+            Current coverage percentage, or None if not found\n+        """\n+        if not self.current_path.exists():\n+            logger.debug(\n+                f"[CoverageTracker] No coverage data at {self.current_path}. "\n+                f"Tests may not have run with --cov flag."\n+            )\n+            return None\n+\n+        try:\n+            data = json.loads(self.current_path.read_text())\n+            return self._extract_coverage_percentage(data)\n+        except Exception as e:\n+            logger.error(f"[CoverageTracker] Failed to load current coverage: {e}")\n+            return None\n+\n+    def _extract_coverage_percentage(self, coverage_data: Dict) -> float:\n+        """Extract overall coverage percentage from pytest-cov JSON.\n+\n+        Args:\n+            coverage_data: Parsed .coverage.json data\n+\n+        Returns:\n+            Coverage percentage (0-100)\n+        """\n+        # pytest-cov JSON format:\n+        # {\n+        #   "totals": {\n+        #     "percent_covered": 85.5,\n+        #     "num_statements": 1000,\n+        #     "missing_lines": 145,\n+        #     ...\n+        #   }\n+        # }\n+        totals = coverage_data.get("totals", {})\n+        return totals.get("percent_covered", 0.0)\n+\n+    def calculate_delta(self) -> Tuple[float, Dict[str, Optional[float]]]:\n+        """Calculate coverage delta (current - baseline).\n+\n+        Returns:\n+            Tuple of (delta, metadata) where:\n+            - delta: Coverage change in percentage points (positive = improvement)\n+            - metadata: Dict with baseline, current, and error information\n+        """\n+        baseline = self.get_baseline_coverage()\n+        current = self.get_current_coverage()\n+\n+        metadata: Dict[str, Optional[float]] = {\n+            "baseline_coverage": baseline,\n+            "current_coverage": current,\n+        }\n+\n+        # Handle missing data\n+        if baseline is None and current is None:\n+            logger.warning(\n+                "[CoverageTracker] Both baseline and current coverage missing. "\n+                "Returning delta=0.0"\n+            )\n+            metadata["error"] = "missing_both"\n+            return 0.0, metadata\n+\n+        if baseline is None:\n+            logger.warning(\n+                "[CoverageTracker] Baseline coverage missing. "\n+                "Cannot calculate delta. Returning 0.0"\n+            )\n+            metadata["error"] = "missing_baseline"\n+            return 0.0, metadata\n+\n+        if current is None:\n+            logger.warning(\n+                "[CoverageTracker] Current coverage missing. "\n+                "Cannot calculate delta. Returning 0.0"\n+            )\n+            metadata["error"] = "missing_current"\n+            return 0.0, metadata\n+\n+        # Calculate delta\n+        delta = current - baseline\n+        logger.info(\n+            f"[CoverageTracker] Coverage delta: {delta:+.2f}% "\n+            f"(baseline: {baseline:.2f}%, current: {current:.2f}%)"\n+        )\n+\n+        return delta, metadata\n+\n+\n+def calculate_coverage_delta(workspace_root: Path) -> float:\n+    """Convenience function to calculate coverage delta.\n+\n+    Args:\n+        workspace_root: Root directory of the workspace\n+\n+    Returns:\n+        Coverage delta in percentage points (positive = improvement)\n+    """\n+    tracker = CoverageTracker(workspace_root)\n+    delta, _ = tracker.calculate_delta()\n+    return delta\ndiff --git a/tests/test_coverage_tracker.py b/tests/test_coverage_tracker.py\nnew file mode 100644\nindex 0000000..1111111\n--- /dev/null\n+++ b/tests/test_coverage_tracker.py\n@@ -0,0 +1,151 @@\n+"""Tests for coverage_tracker module."""\n+\n+import json\n+import pytest\n+from pathlib import Path\n+from src.autopack.coverage_tracker import CoverageTracker, calculate_coverage_delta\n+\n+\n+@pytest.fixture\n+def temp_workspace(tmp_path):\n+    """Create a temporary workspace directory."""\n+    return tmp_path\n+\n+\n+@pytest.fixture\n+def baseline_coverage_data():\n+    """Sample baseline coverage data."""\n+    return {\n+        "totals": {\n+            "percent_covered": 80.0,\n+            "num_statements": 1000,\n+            "missing_lines": 200,\n+        }\n+    }\n+\n+\n+@pytest.fixture\n+def current_coverage_data():\n+    """Sample current coverage data."""\n+    return {\n+        "totals": {\n+            "percent_covered": 85.0,\n+            "num_statements": 1000,\n+            "missing_lines": 150,\n+        }\n+    }\n+\n+\n+def test_calculate_delta_success(temp_workspace, baseline_coverage_data, current_coverage_data):\n+    """Test successful delta calculation with improvement."""\n+    # Setup\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    current_path = temp_workspace / ".coverage.json"\n+    baseline_path.write_text(json.dumps(baseline_coverage_data))\n+    current_path.write_text(json.dumps(current_coverage_data))\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify\n+    assert delta == 5.0  # 85% - 80% = +5%\n+    assert metadata["baseline_coverage"] == 80.0\n+    assert metadata["current_coverage"] == 85.0\n+    assert "error" not in metadata\n+\n+\n+def test_calculate_delta_regression(temp_workspace, baseline_coverage_data):\n+    """Test delta calculation with coverage regression."""\n+    # Setup\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    current_path = temp_workspace / ".coverage.json"\n+    baseline_path.write_text(json.dumps(baseline_coverage_data))\n+    \n+    # Current coverage is lower (regression)\n+    regressed_data = {\n+        "totals": {\n+            "percent_covered": 75.0,\n+            "num_statements": 1000,\n+            "missing_lines": 250,\n+        }\n+    }\n+    current_path.write_text(json.dumps(regressed_data))\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify\n+    assert delta == -5.0  # 75% - 80% = -5%\n+    assert metadata["baseline_coverage"] == 80.0\n+    assert metadata["current_coverage"] == 75.0\n+    assert "error" not in metadata\n+\n+\n+def test_missing_baseline(temp_workspace, current_coverage_data):\n+    """Test handling of missing baseline coverage."""\n+    # Setup - only current coverage exists\n+    current_path = temp_workspace / ".coverage.json"\n+    current_path.write_text(json.dumps(current_coverage_data))\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify\n+    assert delta == 0.0\n+    assert metadata["baseline_coverage"] is None\n+    assert metadata["current_coverage"] == 85.0\n+    assert metadata["error"] == "missing_baseline"\n+\n+\n+def test_missing_current(temp_workspace, baseline_coverage_data):\n+    """Test handling of missing current coverage."""\n+    # Setup - only baseline coverage exists\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    baseline_path.write_text(json.dumps(baseline_coverage_data))\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify\n+    assert delta == 0.0\n+    assert metadata["baseline_coverage"] == 80.0\n+    assert metadata["current_coverage"] is None\n+    assert metadata["error"] == "missing_current"\n+\n+\n+def test_invalid_json(temp_workspace):\n+    """Test handling of invalid JSON in coverage files."""\n+    # Setup - create invalid JSON files\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    current_path = temp_workspace / ".coverage.json"\n+    baseline_path.write_text("invalid json {{{")\n+    current_path.write_text("invalid json {{{")\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify - should handle gracefully\n+    assert delta == 0.0\n+    assert metadata["baseline_coverage"] is None\n+    assert metadata["current_coverage"] is None\n+    assert metadata["error"] == "missing_both"\n+\n+\n+def test_convenience_function(temp_workspace, baseline_coverage_data, current_coverage_data):\n+    """Test convenience function calculate_coverage_delta."""\n+    # Setup\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    current_path = temp_workspace / ".coverage.json"\n+    baseline_path.write_text(json.dumps(baseline_coverage_data))\n+    current_path.write_text(json.dumps(current_coverage_data))\n+\n+    # Execute\n+    delta = calculate_coverage_delta(temp_workspace)\n+\n+    # Verify\n+    assert delta == 5.0  # 85% - 80% = +5%', 'files_modified': ['src/autopack/coverage_tracker.py', 'tests/test_coverage_tracker.py'], 'metadata': {'phase_id': 'build132-phase2-coverage-tracker', 'run_id': 'build132-coverage-delta-integration', 'run_type': 'project_build', 'lines_added': 301, 'lines_removed': 0, 'builder_attempts': 1, 'tokens_used': 35003, 'duration_minutes': 0.0, 'probe_results': [], 'suggested_issues': [], 'notes': 'Create coverage delta calculation module with comprehensive tests per BUILD-132 specification', 'allowed_paths': []}}, 'url': 'https://errors.pydantic.dev/2.7/v/missing'}, {'type': 'missing', 'loc': ['body', 'run_id'], 'msg': 'Field required', 'input': {'success': True, 'output': 'diff --git a/src/autopack/coverage_tracker.py b/src/autopack/coverage_tracker.py\nnew file mode 100644\nindex 0000000..1111111\n--- /dev/null\n+++ b/src/autopack/coverage_tracker.py\n@@ -0,0 +1,150 @@\n+"""Coverage delta calculation for Quality Gate.\n+\n+Tracks test coverage changes relative to baseline for quality assessment.\n+"""\n+\n+import json\n+import logging\n+from pathlib import Path\n+from typing import Optional, Dict, Tuple\n+\n+logger = logging.getLogger(__name__)\n+\n+\n+class CoverageTracker:\n+    """Calculate coverage delta for Quality Gate."""\n+\n+    def __init__(self, workspace_root: Path):\n+        """Initialize coverage tracker.\n+\n+        Args:\n+            workspace_root: Root directory of the workspace\n+        """\n+        self.workspace_root = workspace_root\n+        self.baseline_path = workspace_root / ".coverage_baseline.json"\n+        self.current_path = workspace_root / ".coverage.json"\n+\n+    def get_baseline_coverage(self) -> Optional[float]:\n+        """Load baseline coverage from T0 snapshot.\n+\n+        Returns:\n+            Baseline coverage percentage, or None if not found\n+        """\n+        if not self.baseline_path.exists():\n+            logger.warning(\n+                f"[CoverageTracker] Baseline not found at {self.baseline_path}. "\n+                f"Run \'pytest --cov\' and save .coverage.json as .coverage_baseline.json"\n+            )\n+            return None\n+\n+        try:\n+            data = json.loads(self.baseline_path.read_text())\n+            return self._extract_coverage_percentage(data)\n+        except Exception as e:\n+            logger.error(f"[CoverageTracker] Failed to load baseline: {e}")\n+            return None\n+\n+    def get_current_coverage(self) -> Optional[float]:\n+        """Extract coverage from most recent test run.\n+\n+        Returns:\n+            Current coverage percentage, or None if not found\n+        """\n+        if not self.current_path.exists():\n+            logger.debug(\n+                f"[CoverageTracker] No coverage data at {self.current_path}. "\n+                f"Tests may not have run with --cov flag."\n+            )\n+            return None\n+\n+        try:\n+            data = json.loads(self.current_path.read_text())\n+            return self._extract_coverage_percentage(data)\n+        except Exception as e:\n+            logger.error(f"[CoverageTracker] Failed to load current coverage: {e}")\n+            return None\n+\n+    def _extract_coverage_percentage(self, coverage_data: Dict) -> float:\n+        """Extract overall coverage percentage from pytest-cov JSON.\n+\n+        Args:\n+            coverage_data: Parsed .coverage.json data\n+\n+        Returns:\n+            Coverage percentage (0-100)\n+        """\n+        # pytest-cov JSON format:\n+        # {\n+        #   "totals": {\n+        #     "percent_covered": 85.5,\n+        #     "num_statements": 1000,\n+        #     "missing_lines": 145,\n+        #     ...\n+        #   }\n+        # }\n+        totals = coverage_data.get("totals", {})\n+        return totals.get("percent_covered", 0.0)\n+\n+    def calculate_delta(self) -> Tuple[float, Dict[str, Optional[float]]]:\n+        """Calculate coverage delta (current - baseline).\n+\n+        Returns:\n+            Tuple of (delta, metadata) where:\n+            - delta: Coverage change in percentage points (positive = improvement)\n+            - metadata: Dict with baseline, current, and error information\n+        """\n+        baseline = self.get_baseline_coverage()\n+        current = self.get_current_coverage()\n+\n+        metadata: Dict[str, Optional[float]] = {\n+            "baseline_coverage": baseline,\n+            "current_coverage": current,\n+        }\n+\n+        # Handle missing data\n+        if baseline is None and current is None:\n+            logger.warning(\n+                "[CoverageTracker] Both baseline and current coverage missing. "\n+                "Returning delta=0.0"\n+            )\n+            metadata["error"] = "missing_both"\n+            return 0.0, metadata\n+\n+        if baseline is None:\n+            logger.warning(\n+                "[CoverageTracker] Baseline coverage missing. "\n+                "Cannot calculate delta. Returning 0.0"\n+            )\n+            metadata["error"] = "missing_baseline"\n+            return 0.0, metadata\n+\n+        if current is None:\n+            logger.warning(\n+                "[CoverageTracker] Current coverage missing. "\n+                "Cannot calculate delta. Returning 0.0"\n+            )\n+            metadata["error"] = "missing_current"\n+            return 0.0, metadata\n+\n+        # Calculate delta\n+        delta = current - baseline\n+        logger.info(\n+            f"[CoverageTracker] Coverage delta: {delta:+.2f}% "\n+            f"(baseline: {baseline:.2f}%, current: {current:.2f}%)"\n+        )\n+\n+        return delta, metadata\n+\n+\n+def calculate_coverage_delta(workspace_root: Path) -> float:\n+    """Convenience function to calculate coverage delta.\n+\n+    Args:\n+        workspace_root: Root directory of the workspace\n+\n+    Returns:\n+        Coverage delta in percentage points (positive = improvement)\n+    """\n+    tracker = CoverageTracker(workspace_root)\n+    delta, _ = tracker.calculate_delta()\n+    return delta\ndiff --git a/tests/test_coverage_tracker.py b/tests/test_coverage_tracker.py\nnew file mode 100644\nindex 0000000..1111111\n--- /dev/null\n+++ b/tests/test_coverage_tracker.py\n@@ -0,0 +1,151 @@\n+"""Tests for coverage_tracker module."""\n+\n+import json\n+import pytest\n+from pathlib import Path\n+from src.autopack.coverage_tracker import CoverageTracker, calculate_coverage_delta\n+\n+\n+@pytest.fixture\n+def temp_workspace(tmp_path):\n+    """Create a temporary workspace directory."""\n+    return tmp_path\n+\n+\n+@pytest.fixture\n+def baseline_coverage_data():\n+    """Sample baseline coverage data."""\n+    return {\n+        "totals": {\n+            "percent_covered": 80.0,\n+            "num_statements": 1000,\n+            "missing_lines": 200,\n+        }\n+    }\n+\n+\n+@pytest.fixture\n+def current_coverage_data():\n+    """Sample current coverage data."""\n+    return {\n+        "totals": {\n+            "percent_covered": 85.0,\n+            "num_statements": 1000,\n+            "missing_lines": 150,\n+        }\n+    }\n+\n+\n+def test_calculate_delta_success(temp_workspace, baseline_coverage_data, current_coverage_data):\n+    """Test successful delta calculation with improvement."""\n+    # Setup\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    current_path = temp_workspace / ".coverage.json"\n+    baseline_path.write_text(json.dumps(baseline_coverage_data))\n+    current_path.write_text(json.dumps(current_coverage_data))\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify\n+    assert delta == 5.0  # 85% - 80% = +5%\n+    assert metadata["baseline_coverage"] == 80.0\n+    assert metadata["current_coverage"] == 85.0\n+    assert "error" not in metadata\n+\n+\n+def test_calculate_delta_regression(temp_workspace, baseline_coverage_data):\n+    """Test delta calculation with coverage regression."""\n+    # Setup\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    current_path = temp_workspace / ".coverage.json"\n+    baseline_path.write_text(json.dumps(baseline_coverage_data))\n+    \n+    # Current coverage is lower (regression)\n+    regressed_data = {\n+        "totals": {\n+            "percent_covered": 75.0,\n+            "num_statements": 1000,\n+            "missing_lines": 250,\n+        }\n+    }\n+    current_path.write_text(json.dumps(regressed_data))\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify\n+    assert delta == -5.0  # 75% - 80% = -5%\n+    assert metadata["baseline_coverage"] == 80.0\n+    assert metadata["current_coverage"] == 75.0\n+    assert "error" not in metadata\n+\n+\n+def test_missing_baseline(temp_workspace, current_coverage_data):\n+    """Test handling of missing baseline coverage."""\n+    # Setup - only current coverage exists\n+    current_path = temp_workspace / ".coverage.json"\n+    current_path.write_text(json.dumps(current_coverage_data))\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify\n+    assert delta == 0.0\n+    assert metadata["baseline_coverage"] is None\n+    assert metadata["current_coverage"] == 85.0\n+    assert metadata["error"] == "missing_baseline"\n+\n+\n+def test_missing_current(temp_workspace, baseline_coverage_data):\n+    """Test handling of missing current coverage."""\n+    # Setup - only baseline coverage exists\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    baseline_path.write_text(json.dumps(baseline_coverage_data))\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify\n+    assert delta == 0.0\n+    assert metadata["baseline_coverage"] == 80.0\n+    assert metadata["current_coverage"] is None\n+    assert metadata["error"] == "missing_current"\n+\n+\n+def test_invalid_json(temp_workspace):\n+    """Test handling of invalid JSON in coverage files."""\n+    # Setup - create invalid JSON files\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    current_path = temp_workspace / ".coverage.json"\n+    baseline_path.write_text("invalid json {{{")\n+    current_path.write_text("invalid json {{{")\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify - should handle gracefully\n+    assert delta == 0.0\n+    assert metadata["baseline_coverage"] is None\n+    assert metadata["current_coverage"] is None\n+    assert metadata["error"] == "missing_both"\n+\n+\n+def test_convenience_function(temp_workspace, baseline_coverage_data, current_coverage_data):\n+    """Test convenience function calculate_coverage_delta."""\n+    # Setup\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    current_path = temp_workspace / ".coverage.json"\n+    baseline_path.write_text(json.dumps(baseline_coverage_data))\n+    current_path.write_text(json.dumps(current_coverage_data))\n+\n+    # Execute\n+    delta = calculate_coverage_delta(temp_workspace)\n+\n+    # Verify\n+    assert delta == 5.0  # 85% - 80% = +5%', 'files_modified': ['src/autopack/coverage_tracker.py', 'tests/test_coverage_tracker.py'], 'metadata': {'phase_id': 'build132-phase2-coverage-tracker', 'run_id': 'build132-coverage-delta-integration', 'run_type': 'project_build', 'lines_added': 301, 'lines_removed': 0, 'builder_attempts': 1, 'tokens_used': 35003, 'duration_minutes': 0.0, 'probe_results': [], 'suggested_issues': [], 'notes': 'Create coverage delta calculation module with comprehensive tests per BUILD-132 specification', 'allowed_paths': []}}, 'url': 'https://errors.pydantic.dev/2.7/v/missing'}, {'type': 'missing', 'loc': ['body', 'status'], 'msg': 'Field required', 'input': {'success': True, 'output': 'diff --git a/src/autopack/coverage_tracker.py b/src/autopack/coverage_tracker.py\nnew file mode 100644\nindex 0000000..1111111\n--- /dev/null\n+++ b/src/autopack/coverage_tracker.py\n@@ -0,0 +1,150 @@\n+"""Coverage delta calculation for Quality Gate.\n+\n+Tracks test coverage changes relative to baseline for quality assessment.\n+"""\n+\n+import json\n+import logging\n+from pathlib import Path\n+from typing import Optional, Dict, Tuple\n+\n+logger = logging.getLogger(__name__)\n+\n+\n+class CoverageTracker:\n+    """Calculate coverage delta for Quality Gate."""\n+\n+    def __init__(self, workspace_root: Path):\n+        """Initialize coverage tracker.\n+\n+        Args:\n+            workspace_root: Root directory of the workspace\n+        """\n+        self.workspace_root = workspace_root\n+        self.baseline_path = workspace_root / ".coverage_baseline.json"\n+        self.current_path = workspace_root / ".coverage.json"\n+\n+    def get_baseline_coverage(self) -> Optional[float]:\n+        """Load baseline coverage from T0 snapshot.\n+\n+        Returns:\n+            Baseline coverage percentage, or None if not found\n+        """\n+        if not self.baseline_path.exists():\n+            logger.warning(\n+                f"[CoverageTracker] Baseline not found at {self.baseline_path}. "\n+                f"Run \'pytest --cov\' and save .coverage.json as .coverage_baseline.json"\n+            )\n+            return None\n+\n+        try:\n+            data = json.loads(self.baseline_path.read_text())\n+            return self._extract_coverage_percentage(data)\n+        except Exception as e:\n+            logger.error(f"[CoverageTracker] Failed to load baseline: {e}")\n+            return None\n+\n+    def get_current_coverage(self) -> Optional[float]:\n+        """Extract coverage from most recent test run.\n+\n+        Returns:\n+            Current coverage percentage, or None if not found\n+        """\n+        if not self.current_path.exists():\n+            logger.debug(\n+                f"[CoverageTracker] No coverage data at {self.current_path}. "\n+                f"Tests may not have run with --cov flag."\n+            )\n+            return None\n+\n+        try:\n+            data = json.loads(self.current_path.read_text())\n+            return self._extract_coverage_percentage(data)\n+        except Exception as e:\n+            logger.error(f"[CoverageTracker] Failed to load current coverage: {e}")\n+            return None\n+\n+    def _extract_coverage_percentage(self, coverage_data: Dict) -> float:\n+        """Extract overall coverage percentage from pytest-cov JSON.\n+\n+        Args:\n+            coverage_data: Parsed .coverage.json data\n+\n+        Returns:\n+            Coverage percentage (0-100)\n+        """\n+        # pytest-cov JSON format:\n+        # {\n+        #   "totals": {\n+        #     "percent_covered": 85.5,\n+        #     "num_statements": 1000,\n+        #     "missing_lines": 145,\n+        #     ...\n+        #   }\n+        # }\n+        totals = coverage_data.get("totals", {})\n+        return totals.get("percent_covered", 0.0)\n+\n+    def calculate_delta(self) -> Tuple[float, Dict[str, Optional[float]]]:\n+        """Calculate coverage delta (current - baseline).\n+\n+        Returns:\n+            Tuple of (delta, metadata) where:\n+            - delta: Coverage change in percentage points (positive = improvement)\n+            - metadata: Dict with baseline, current, and error information\n+        """\n+        baseline = self.get_baseline_coverage()\n+        current = self.get_current_coverage()\n+\n+        metadata: Dict[str, Optional[float]] = {\n+            "baseline_coverage": baseline,\n+            "current_coverage": current,\n+        }\n+\n+        # Handle missing data\n+        if baseline is None and current is None:\n+            logger.warning(\n+                "[CoverageTracker] Both baseline and current coverage missing. "\n+                "Returning delta=0.0"\n+            )\n+            metadata["error"] = "missing_both"\n+            return 0.0, metadata\n+\n+        if baseline is None:\n+            logger.warning(\n+                "[CoverageTracker] Baseline coverage missing. "\n+                "Cannot calculate delta. Returning 0.0"\n+            )\n+            metadata["error"] = "missing_baseline"\n+            return 0.0, metadata\n+\n+        if current is None:\n+            logger.warning(\n+                "[CoverageTracker] Current coverage missing. "\n+                "Cannot calculate delta. Returning 0.0"\n+            )\n+            metadata["error"] = "missing_current"\n+            return 0.0, metadata\n+\n+        # Calculate delta\n+        delta = current - baseline\n+        logger.info(\n+            f"[CoverageTracker] Coverage delta: {delta:+.2f}% "\n+            f"(baseline: {baseline:.2f}%, current: {current:.2f}%)"\n+        )\n+\n+        return delta, metadata\n+\n+\n+def calculate_coverage_delta(workspace_root: Path) -> float:\n+    """Convenience function to calculate coverage delta.\n+\n+    Args:\n+        workspace_root: Root directory of the workspace\n+\n+    Returns:\n+        Coverage delta in percentage points (positive = improvement)\n+    """\n+    tracker = CoverageTracker(workspace_root)\n+    delta, _ = tracker.calculate_delta()\n+    return delta\ndiff --git a/tests/test_coverage_tracker.py b/tests/test_coverage_tracker.py\nnew file mode 100644\nindex 0000000..1111111\n--- /dev/null\n+++ b/tests/test_coverage_tracker.py\n@@ -0,0 +1,151 @@\n+"""Tests for coverage_tracker module."""\n+\n+import json\n+import pytest\n+from pathlib import Path\n+from src.autopack.coverage_tracker import CoverageTracker, calculate_coverage_delta\n+\n+\n+@pytest.fixture\n+def temp_workspace(tmp_path):\n+    """Create a temporary workspace directory."""\n+    return tmp_path\n+\n+\n+@pytest.fixture\n+def baseline_coverage_data():\n+    """Sample baseline coverage data."""\n+    return {\n+        "totals": {\n+            "percent_covered": 80.0,\n+            "num_statements": 1000,\n+            "missing_lines": 200,\n+        }\n+    }\n+\n+\n+@pytest.fixture\n+def current_coverage_data():\n+    """Sample current coverage data."""\n+    return {\n+        "totals": {\n+            "percent_covered": 85.0,\n+            "num_statements": 1000,\n+            "missing_lines": 150,\n+        }\n+    }\n+\n+\n+def test_calculate_delta_success(temp_workspace, baseline_coverage_data, current_coverage_data):\n+    """Test successful delta calculation with improvement."""\n+    # Setup\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    current_path = temp_workspace / ".coverage.json"\n+    baseline_path.write_text(json.dumps(baseline_coverage_data))\n+    current_path.write_text(json.dumps(current_coverage_data))\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify\n+    assert delta == 5.0  # 85% - 80% = +5%\n+    assert metadata["baseline_coverage"] == 80.0\n+    assert metadata["current_coverage"] == 85.0\n+    assert "error" not in metadata\n+\n+\n+def test_calculate_delta_regression(temp_workspace, baseline_coverage_data):\n+    """Test delta calculation with coverage regression."""\n+    # Setup\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    current_path = temp_workspace / ".coverage.json"\n+    baseline_path.write_text(json.dumps(baseline_coverage_data))\n+    \n+    # Current coverage is lower (regression)\n+    regressed_data = {\n+        "totals": {\n+            "percent_covered": 75.0,\n+            "num_statements": 1000,\n+            "missing_lines": 250,\n+        }\n+    }\n+    current_path.write_text(json.dumps(regressed_data))\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify\n+    assert delta == -5.0  # 75% - 80% = -5%\n+    assert metadata["baseline_coverage"] == 80.0\n+    assert metadata["current_coverage"] == 75.0\n+    assert "error" not in metadata\n+\n+\n+def test_missing_baseline(temp_workspace, current_coverage_data):\n+    """Test handling of missing baseline coverage."""\n+    # Setup - only current coverage exists\n+    current_path = temp_workspace / ".coverage.json"\n+    current_path.write_text(json.dumps(current_coverage_data))\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify\n+    assert delta == 0.0\n+    assert metadata["baseline_coverage"] is None\n+    assert metadata["current_coverage"] == 85.0\n+    assert metadata["error"] == "missing_baseline"\n+\n+\n+def test_missing_current(temp_workspace, baseline_coverage_data):\n+    """Test handling of missing current coverage."""\n+    # Setup - only baseline coverage exists\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    baseline_path.write_text(json.dumps(baseline_coverage_data))\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify\n+    assert delta == 0.0\n+    assert metadata["baseline_coverage"] == 80.0\n+    assert metadata["current_coverage"] is None\n+    assert metadata["error"] == "missing_current"\n+\n+\n+def test_invalid_json(temp_workspace):\n+    """Test handling of invalid JSON in coverage files."""\n+    # Setup - create invalid JSON files\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    current_path = temp_workspace / ".coverage.json"\n+    baseline_path.write_text("invalid json {{{")\n+    current_path.write_text("invalid json {{{")\n+\n+    # Execute\n+    tracker = CoverageTracker(temp_workspace)\n+    delta, metadata = tracker.calculate_delta()\n+\n+    # Verify - should handle gracefully\n+    assert delta == 0.0\n+    assert metadata["baseline_coverage"] is None\n+    assert metadata["current_coverage"] is None\n+    assert metadata["error"] == "missing_both"\n+\n+\n+def test_convenience_function(temp_workspace, baseline_coverage_data, current_coverage_data):\n+    """Test convenience function calculate_coverage_delta."""\n+    # Setup\n+    baseline_path = temp_workspace / ".coverage_baseline.json"\n+    current_path = temp_workspace / ".coverage.json"\n+    baseline_path.write_text(json.dumps(baseline_coverage_data))\n+    current_path.write_text(json.dumps(current_coverage_data))\n+\n+    # Execute\n+    delta = calculate_coverage_delta(temp_workspace)\n+\n+    # Verify\n+    assert delta == 5.0  # 85% - 80% = +5%', 'files_modified': ['src/autopack/coverage_tracker.py', 'tests/test_coverage_tracker.py'], 'metadata': {'phase_id': 'build132-phase2-coverage-tracker', 'run_id': 'build132-coverage-delta-integration', 'run_type': 'project_build', 'lines_added': 301, 'lines_removed': 0, 'builder_attempts': 1, 'tokens_used': 35003, 'duration_minutes': 0.0, 'probe_results': [], 'suggested_issues': [], 'notes': 'Create coverage delta calculation module with comprehensive tests per BUILD-132 specification', 'allowed_paths': []}}, 'url': 'https://errors.pydantic.dev/2.7/v/missing'}]
[2025-12-23 22:07:12] INFO: [build132-phase2-coverage-tracker] Phase 2.3: Validation errors indicate malformed patch - LLM should regenerate
[2025-12-23 22:07:12] INFO: [ARCHIVE_CONSOLIDATOR] Logged new error: Patch validation failure (422)
[2025-12-23 22:07:12] WARNING: Failed to post builder result: 422 Client Error: Unprocessable Entity for url: http://localhost:8000/runs/build132-coverage-delta-integration/phases/build132-phase2-coverage-tracker/builder_result
[2025-12-23 22:07:12] INFO: [ARCHIVE_CONSOLIDATOR] Logged new error: API failure: POST builder_result
[2025-12-23 22:07:12] INFO: [build132-phase2-coverage-tracker] Step 2/5: Applying patch...
[2025-12-23 22:07:12] WARNING: [Isolation] BLOCKED: Patch attempts to modify protected path: src/autopack/coverage_tracker.py
[2025-12-23 22:07:12] ERROR: [Isolation] Patch rejected - 1 violations (protected paths + scope)
[2025-12-23 22:07:12] WARNING: [Governance] Protected path violation: 1 paths
[2025-12-23 22:07:12] INFO: [Governance:build132-phase2-coverage-tracker] Protected path violation detected: 1 paths
[2025-12-23 22:07:12] ERROR: [build132-phase2-coverage-tracker] Execution failed: 'AutonomousExecutor' object has no attribute 'db'
Traceback:
Traceback (most recent call last):
  File "C:\dev\Autopack\src\autopack\autonomous_executor.py", line 4505, in _execute_phase_with_recovery
    governance_handled = self._try_handle_governance_request(
                         ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "C:\dev\Autopack\src\autopack\autonomous_executor.py", line 7372, in _try_handle_governance_request
    db_session=self.db,
               ^^^^^^^
AttributeError: 'AutonomousExecutor' object has no attribute 'db'

[2025-12-23 22:07:12] INFO: [ARCHIVE_CONSOLIDATOR] Logged new error: Phase build132-phase2-coverage-tracker inner execution failure
[2025-12-23 22:07:12] INFO: Updated phase build132-phase2-coverage-tracker status to FAILED
[2025-12-23 22:07:12] WARNING: Failed to write run_summary from executor: name 'models' is not defined
[2025-12-23 22:07:24] INFO: [RetrievalTrigger] Phase build132-phase2-coverage-tracker attempt 1: Error messages lack context - triggering deep retrieval
[2025-12-23 22:07:24] INFO: [DeepRetrieval] Starting bounded retrieval for phase build132-phase2-coverage-tracker (priority=medium)
[2025-12-23 22:07:25] INFO: [DeepRetrieval] Retrieved 0 run artifacts (0 bytes), 1 SOT files (15360 bytes), 0 memory entries (0 bytes)
[2025-12-23 22:07:25] WARNING: [build132-phase2-coverage-tracker] Attempt 1/5 failed, will escalate model for next retry
[2025-12-23 22:07:25] WARNING: Phase build132-phase2-coverage-tracker finished with status: FAILED
[2025-12-23 22:07:25] INFO: Waiting 10s before next phase...
[2025-12-23 22:07:35] INFO: Iteration 3: Fetching run status...
[2025-12-23 22:07:35] INFO: [BUILD-041] Next phase: build132-phase3-executor-integration
[2025-12-23 22:07:35] INFO: [BUILD-123v2] Phase 'build132-phase3-executor-integration' has no scope - generating manifest...
[2025-12-23 22:07:35] INFO: Generating manifest for run: build132-coverage-delta-integration
[2025-12-23 22:07:35] INFO: Repo structure scanned successfully
[2025-12-23 22:07:35] INFO: [BUILD-128] Phase 'build132-phase3-executor-integration' has deliverables - inferring scope from deliverables
[2025-12-23 22:07:35] INFO: [BUILD-128] Inferred category 'backend' from deliverables (confidence=100.0%)
[2025-12-23 22:07:35] INFO: [BUILD-128] Generated scope: 1 paths, 1 context files
[2025-12-23 22:07:35] INFO: [BUILD-129] Added token estimate to phase: 936 output tokens (1 deliverables, confidence=0.80)
[2025-12-23 22:07:35] ERROR: Plan validation failed: Phase 'build132-phase3-executor-integration' validation failed: Protected paths in scope: src/autopack/autonomous_executor.py...
[2025-12-23 22:07:35] WARNING: [BUILD-123v2] Manifest generation failed for 'build132-phase3-executor-integration': Phase 'build132-phase3-executor-integration' validation failed: Protected paths in scope: src/autopack/autonomous_executor.py...
[2025-12-23 22:07:35] INFO: [build132-phase3-executor-integration] Step 1/4: Generating code with Builder (via LlmService)...
[2025-12-23 22:07:35] INFO: [Context] Loaded 4 recently modified files for fresh context
[2025-12-23 22:07:35] INFO: [Context] Loaded 1 files mentioned in phase description
[2025-12-23 22:07:35] INFO: [Context] Total: 17 files loaded for Builder context (modified=4, mentioned=1)
[2025-12-23 22:07:35] INFO: [TOKEN_BUDGET] Context loading: ~19999 tokens (99% of 20000 budget)
[2025-12-23 22:07:35] INFO: [build132-phase3-executor-integration] Loaded 17 files for context
[2025-12-23 22:07:35] INFO: [ModelSelector] Selected claude-sonnet-4-5 for builder (complexity=medium, attempt=0, intra_tier=0)
[2025-12-23 22:07:35] INFO: [MODEL-SELECT] Builder: model=claude-sonnet-4-5, complexity=medium->medium, attempt=0, category=integration
[2025-12-23 22:07:35] INFO: [TokenEstimator] Budget selection: base=12288, estimated=780, with_buffer=936, selected=12288, confidence=80.0%
[2025-12-23 22:07:35] INFO: [BUILD-129] Token estimate: 780 output tokens (1 deliverables, confidence=0.80), selected budget: 12288
[2025-12-23 22:07:35] WARNING: CONSOLIDATED_DEBUG.md not found at C:\dev\Autopack\.autonomous_runs\file-organizer-app-v1\archive\CONSOLIDATED_DEBUG.md
[2025-12-23 22:07:35] WARNING: [TOKEN_SOFT_CAP] run_id=unknown phase_id=build132-phase3-executor-integration est_total=34940 soft_cap=32000 (prompt=23472 completion=11468 complexity=medium)
[2025-12-23 22:07:38] INFO: HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
