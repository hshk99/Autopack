# Autopack

Autopack is an autonomous build framework (Builder → Auditor → Quality Gate) designed to be safe, deterministic, and mechanically enforceable via CI contracts.

## How this repo is meant to be used (especially by LLMs)

This repo is structured so that **LLMs (Cursor / Claude / etc.) should rely on SOT ledgers** as the canonical, machine-consumable “memory”:

- `docs/BUILD_HISTORY.md`: what changed and what was verified
- `docs/DEBUG_LOG.md`: failures → root cause → fix → verification
- `docs/ARCHITECTURE_DECISIONS.md`: durable rationale (“why”)

`README.md` intentionally stays short to avoid stale build journals and “two truths”. The navigation hub is `docs/INDEX.md`.

### “One stream” intention flow (plan → build → tidy → memory → reuse)

Autopack is designed so that high-signal information **survives** and becomes reusable:

- **Planning / execution artifacts** (run/tier/phase outcomes, summaries, telemetry) are produced during runs.
- **Tidy consolidates** durable learnings into the SOT ledgers above (append-only).
- **Optional runtime retrieval**: the executor can index/retrieve SOT chunks via `MemoryService` (vector memory: Qdrant/FAISS) when enabled:
  - `AUTOPACK_ENABLE_SOT_MEMORY_INDEXING=true`
  - `AUTOPACK_SOT_RETRIEVAL_ENABLED=true`

Note: SOT→DB sync (`scripts/tidy/sot_db_sync.py`) exists as a derived index (`sot_entries`) for DB/Qdrant sync workflows; **runtime decisioning currently uses vector memory retrieval**, not DB reads from `sot_entries`.

**Full historical changelog**: `docs/CHANGELOG.md` (version history and feature announcements)

## Quickstart

**New developers**: Get Autopack running in <15 minutes:
- **[Developer Quickstart Guide](docs/QUICKSTART.md)** - Step-by-step setup for local development

**Already familiar?** Quick commands:
- **Run the API (dev)**:
  - `PYTHONPATH=src python -m uvicorn autopack.main:app --host 127.0.0.1 --port 8000`
- **Run an executor**:
  - `python src/autopack/autonomous_executor.py --run-id my-run`

## Docs (start here)

- **Docs index (navigation hub)**: `docs/INDEX.md`
- **Build ledger (authoritative)**: `docs/BUILD_HISTORY.md`
- **Debug ledger (authoritative)**: `docs/DEBUG_LOG.md`
- **Architecture decisions (authoritative)**: `docs/ARCHITECTURE_DECISIONS.md`
- **Changelog (historical ledger)**: `docs/CHANGELOG.md`
- **Reliability track (P0 + P1)**: `docs/P0_RELIABILITY_DECISIONS.md`
- **Next major roadmap (universal autonomy + safe parallelism)**: `docs/IMPLEMENTATION_PLAN_PIVOT_INTENTIONS_AUTONOMY_PARALLELISM.md`

## Operator Guides

- **Memory Service Production Guide**: [docs/MEMORY_SERVICE_OPERATOR_GUIDE.md](docs/MEMORY_SERVICE_OPERATOR_GUIDE.md) - Comprehensive guide for operating the vector memory service (Qdrant/FAISS, setup, troubleshooting, performance tuning)

## Project Status

**Version**: 0.5.1

**Distribution intent**: Autopack is **for personal/internal use only** (not distributed). No external contributions are accepted. Projects built using Autopack **may be published and monetized**; downstream projects must implement their own security posture (threat modeling, secure hosting, release pipeline, monitoring) appropriate to their distribution model.

<!-- SOT_SUMMARY_START -->
**Last Updated**: 2026-01-16 01:14

- **Builds Completed**: 213 (includes multi-phase builds, 186 unique)
- **Latest Build**: BUILD-178: Pivot Intentions v2 + Gap Taxonomy + Autonomy Loop - Phases 0-5 [OK]
- **Architecture Decisions**: 48
- **Debugging Sessions**: 86

*Auto-generated by Autopack Tidy System*
<!-- SOT_SUMMARY_END -->

## CI-Efficient Development

Autopack uses a **3-gate CI test strategy** with 4,901 core tests that must pass. To enable fast, efficient development:

- **Path Filtering**: CI automatically skips irrelevant jobs based on changed files
- **Test Markers**: `aspirational`, `research`, and `legacy_contract` tests are non-blocking
- **Parallel Execution**: pytest-xdist reduces test time by 50% (PR-INFRA-1)
- **Smart Pre-flight**: Local targeted testing with `scripts/preflight_smart.py` (PR-INFRA-2)
- **Comprehensive Scans**: CI-categorized improvement workflow (PR-INFRA-3)

**Quick Reference**: [docs/CI_EFFICIENT_DEVELOPMENT.md](docs/CI_EFFICIENT_DEVELOPMENT.md) - Choose the right workflow for your task (docs/frontend/backend/refactoring/comprehensive scan)

**For comprehensive improvement scans**: Use [docs/COMPREHENSIVE_SCAN_UNIVERSAL_PROMPT.md](docs/COMPREHENSIVE_SCAN_UNIVERSAL_PROMPT.md) to categorize improvements by CI impact (A/B/C/D/E) and execute in parallel waves. Reduces CI time from 450+ min to ~125 min (72% reduction).

**Full Strategy**: [docs/COMPREHENSIVE_SCAN_WORKFLOW.md](docs/COMPREHENSIVE_SCAN_WORKFLOW.md)
