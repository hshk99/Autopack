# Doc Link Triage Overrides
#
# This file specifies manual triage decisions for broken doc links.
# Used by scripts/doc_links/apply_triage.py to apply bulk fixes.
#
# Format:
#   - pattern: Glob pattern or specific path to match
#     action: ignore | fix | manual
#     reason_filter: Optional - only apply to specific reason codes
#     fix_target: Required if action=fix - target path to fix to
#     note: Optional human-readable note
#
# Example:
#   - pattern: "**/*.md"
#     broken_target: ".autonomous_runs/tidy_pending_moves.json"
#     action: ignore
#     reason_filter: runtime_endpoint
#     note: "Runtime artifact, not a static file"

# =============================================================================
# PHASE 1: Quick Wins - Runtime Endpoints (ignore these)
# =============================================================================

# .autonomous_runs runtime artifacts (these are created at runtime)
- pattern: "**/*.md"
  broken_target: ".autonomous_runs/tidy_pending_moves.json"
  action: ignore
  reason_filter: runtime_endpoint
  note: "Runtime artifact - created during tidy operations"

- pattern: "**/*.md"
  broken_target: ".autonomous_runs/tidy_activity.log"
  action: ignore
  reason_filter: runtime_endpoint
  note: "Runtime log file - created during tidy operations"

- pattern: "**/*.md"
  broken_target: ".autonomous_runs/storage_execution.log"
  action: ignore
  reason_filter: runtime_endpoint
  note: "Runtime log file - created during storage operations"

- pattern: "**/*.md"
  broken_target: ".autonomous_runs/.../ARCHIVE_INDEX.md"
  action: ignore
  reason_filter: runtime_endpoint
  note: "Runtime index - created during archive operations"

# API endpoints (these are HTTP endpoints, not files)
- pattern: "**/*.md"
  broken_target: "/api/auth/.well-known/jwks.json"
  action: ignore
  reason_filter: runtime_endpoint
  note: "HTTP API endpoint, not a file path"

# Runtime file patterns
- pattern: "**/*.md"
  broken_target_glob: "archive/reports/storage/weekly/weekly_delta_*.txt"
  action: ignore
  reason_filter: runtime_endpoint
  note: "Runtime report pattern - files created on demand"

# =============================================================================
# PHASE 2: Historical References (can be ignored or moved to archive)
# =============================================================================

# Superseded documents that were intentionally removed
- pattern: "**/*.md"
  broken_target: "archive/superseded/reports/BUILD-162_LOCK_STATUS_UX.md"
  action: ignore
  reason_filter: historical_ref
  note: "Reference to superseded document - content rolled into BUILD-161"

- pattern: "**/*.md"
  broken_target: "archive/superseded/reports/BUILD-107.md"
  action: ignore
  reason_filter: historical_ref
  note: "Reference to superseded document"

- pattern: "**/*.md"
  broken_target: "archive/IMPLEMENTATION_PLAN.md"
  action: ignore
  reason_filter: historical_ref
  note: "Historical planning document"

# =============================================================================
# PHASE 3: Missing Files (src/backend/** paths that don't exist)
# =============================================================================

# Backend paths that don't exist (project may not have backend anymore)
- pattern: "docs/AUTHENTICATION.md"
  broken_target_glob: "src/backend/**"
  action: ignore
  reason_filter: missing_file
  note: "Backend directory structure may have changed or been removed"

# =============================================================================
# PHASE 4: Storage Optimizer Paths (need to check if src/ prefix is missing)
# =============================================================================

# Storage optimizer modules (may need src/ prefix)
- pattern: "docs/ARCHITECTURE_DECISIONS.md"
  broken_target: "storage_optimizer/approval_pattern_analyzer.py"
  action: fix
  fix_target: "src/autopack/storage_optimizer/approval_pattern_analyzer.py"
  reason_filter: missing_file
  note: "Missing src/autopack prefix"

- pattern: "docs/ARCHITECTURE_DECISIONS.md"
  broken_target: "storage_optimizer/smart_categorizer.py"
  action: fix
  fix_target: "src/autopack/storage_optimizer/smart_categorizer.py"
  reason_filter: missing_file
  note: "Missing src/autopack prefix"

- pattern: "docs/ARCHITECTURE_DECISIONS.md"
  broken_target: "storage_optimizer/recommendation_engine.py"
  action: fix
  fix_target: "src/autopack/storage_optimizer/recommendation_engine.py"
  reason_filter: missing_file
  note: "Missing src/autopack prefix"

- pattern: "docs/ARCHITECTURE_DECISIONS.md"
  broken_target: "storage_optimizer/steam_detector.py"
  action: fix
  fix_target: "src/autopack/storage_optimizer/steam_detector.py"
  reason_filter: missing_file
  note: "Missing src/autopack prefix"

- pattern: "docs/ARCHITECTURE_DECISIONS.md"
  broken_target: "storage_optimizer/policy.py"
  action: fix
  fix_target: "src/autopack/storage_optimizer/policy.py"
  reason_filter: missing_file
  note: "Missing src/autopack prefix"

- pattern: "docs/ARCHITECTURE_DECISIONS.md"
  broken_target: "storage_optimizer/models.py"
  action: fix
  fix_target: "src/autopack/storage_optimizer/models.py"
  reason_filter: missing_file
  note: "Missing src/autopack prefix"

- pattern: "docs/ARCHITECTURE_DECISIONS.md"
  broken_target: "storage_optimizer/scanner.py"
  action: fix
  fix_target: "src/autopack/storage_optimizer/scanner.py"
  reason_filter: missing_file
  note: "Missing src/autopack prefix"

- pattern: "docs/ARCHITECTURE_DECISIONS.md"
  broken_target: "storage_optimizer/classifier.py"
  action: fix
  fix_target: "src/autopack/storage_optimizer/classifier.py"
  reason_filter: missing_file
  note: "Missing src/autopack prefix"

- pattern: "docs/ARCHITECTURE_DECISIONS.md"
  broken_target: "storage_optimizer/reporter.py"
  action: fix
  fix_target: "src/autopack/storage_optimizer/reporter.py"
  reason_filter: missing_file
  note: "Missing src/autopack prefix"

# =============================================================================
# PHASE 5: Example/Placeholder Paths (safe to ignore)
# =============================================================================

# Generic placeholders used in documentation
- pattern: "**/*.md"
  broken_target: "path/to/file.md"
  action: ignore
  note: "Example placeholder path"

- pattern: "**/*.md"
  broken_target: "path/to/file.txt"
  action: ignore
  note: "Example placeholder path"

- pattern: "**/*.md"
  broken_target: "file.md"
  action: ignore
  note: "Generic example path"

- pattern: "**/*.md"
  broken_target: "target"
  action: ignore
  note: "Generic placeholder"

- pattern: "**/*.md"
  broken_target: "new_target"
  action: ignore
  note: "Generic placeholder"

# =============================================================================
# PHASE 6: Pattern Expansion - High-Confidence Runtime Endpoints (BUILD-166)
# =============================================================================

# Backend paths - all references to src/backend/** are historical (backend removed in BUILD-146)
- pattern: "**/*.md"
  broken_target_glob: "src/backend/**"
  action: ignore
  reason_filter: runtime_endpoint
  note: "Backend removed in BUILD-146, historical refs intentional"

- pattern: "**/*.md"
  broken_target_glob: "src/backend/**"
  action: ignore
  reason_filter: historical_ref
  note: "Backend removed in BUILD-146, historical refs intentional"

# .autonomous_runs runtime artifacts (glob patterns for dynamic content)
- pattern: "**/*.md"
  broken_target_glob: ".autonomous_runs/file-organizer-app-v1/**"
  action: ignore
  reason_filter: runtime_endpoint
  note: "Autonomous run artifacts - created at runtime"

- pattern: "**/*.md"
  broken_target_glob: ".autonomous_runs/lovable-integration-v1/**"
  action: ignore
  reason_filter: runtime_endpoint
  note: "Autonomous run artifacts - created at runtime"

- pattern: "**/*.md"
  broken_target_glob: ".autonomous_runs/**/*.yaml"
  action: ignore
  reason_filter: runtime_endpoint
  note: "Runtime YAML artifacts - created during autonomous operations"

- pattern: "**/*.md"
  broken_target_glob: ".autonomous_runs/**/*.md"
  action: ignore
  reason_filter: runtime_endpoint
  note: "Runtime markdown artifacts - created during autonomous operations"

# Test paths that are runtime-generated
- pattern: "**/*.md"
  broken_target_glob: "tests/autopack/autonomous/**"
  action: ignore
  reason_filter: runtime_endpoint
  note: "Test paths - may not exist in all environments"

# Tracer bullet paths (historical - project evolved past tracer bullets)
- pattern: "**/*.md"
  broken_target_glob: "src/autopack/tracer_bullet/**"
  action: ignore
  reason_filter: runtime_endpoint
  note: "Tracer bullet code - historical reference"

- pattern: "**/*.md"
  broken_target_glob: "tracer_bullet/**"
  action: ignore
  reason_filter: historical_ref
  note: "Tracer bullet code - historical reference"

# =============================================================================
# PHASE 7: Pattern Expansion - Missing Files (BUILD-166)
# =============================================================================

# CI workflow references (may have been renamed or moved)
- pattern: "**/*.md"
  broken_target: ".github/workflows/ci.yml"
  action: ignore
  reason_filter: missing_file
  note: "CI workflow may have been renamed or restructured"

# Frontend package lock (not tracked in git or removed)
- pattern: "**/*.md"
  broken_target: "fileorganizer/frontend/package-lock.json"
  action: ignore
  reason_filter: missing_file
  note: "Package lock not tracked in git or project removed"

# Proposed scripts (may not have been implemented)
- pattern: "**/*.md"
  broken_target: "scripts/propose_estimator_calibration.py"
  action: ignore
  reason_filter: missing_file
  note: "Proposed script - may not have been implemented"

# Excerpt files (sample data, not committed)
- pattern: "**/*.md"
  broken_target_glob: "excerpts/**"
  action: ignore
  reason_filter: missing_file
  note: "Sample data or excerpts - not committed to repository"

# Historical config files
- pattern: "**/*.md"
  broken_target: ".autopack.yaml"
  action: ignore
  reason_filter: historical_ref
  note: "Historical config file format - may have migrated to new format"

# =============================================================================
# PHASE 8: Missing Documents (need manual investigation)
# =============================================================================

# These require manual review to determine if they should be created or ignored
- pattern: "**/*.md"
  broken_target: "STATUS_AUDITOR_IMPLEMENTATION.md"
  action: manual
  note: "Needs review - may need to be created or reference may be obsolete"

- pattern: "**/*.md"
  broken_target: "docs/BUILD-107.md"
  action: manual
  note: "Needs review - check if this was moved to archive or deleted"

# =============================================================================
# PHASE 9: BUILD-167 Burndown - Historical Code Paths (2026-01-03)
# =============================================================================

# fileorganizer/ - removed project component
- pattern: "**/*.md"
  broken_target_glob: "fileorganizer/**"
  action: ignore
  reason_filter: missing_file
  note: "Historical project component - removed, refs are intentional historical context"

# research_tracer/ - historical code
- pattern: "**/*.md"
  broken_target_glob: "research_tracer/**"
  action: ignore
  reason_filter: missing_file
  note: "Historical tracer bullet code - intentional historical reference"

# Specific historical code files frequently referenced
- pattern: "**/*.md"
  broken_target: "autonomous_executor.py"
  action: ignore
  reason_filter: missing_file
  note: "Historical code file reference - may have been moved/refactored"

- pattern: "**/*.md"
  broken_target: "tidy_up.py"
  action: ignore
  reason_filter: missing_file
  note: "Code file reference - may have been moved to scripts/"

- pattern: "**/*.md"
  broken_target: "drain_one_phase.py"
  action: ignore
  reason_filter: missing_file
  note: "Historical script - may have been refactored or removed"

# Common file extensions referenced in backticks (informational, not links)
# These are code formatting examples, not broken links
- pattern: "**/*.md"
  broken_target: ".log"
  action: ignore
  reason_filter: missing_file
  note: "File extension example in backticks - informational code formatting"

- pattern: "**/*.md"
  broken_target: ".md"
  action: ignore
  reason_filter: missing_file
  note: "File extension example in backticks - informational code formatting"

- pattern: "**/*.md"
  broken_target: ".json"
  action: ignore
  reason_filter: missing_file
  note: "File extension example in backticks - informational code formatting"

- pattern: "**/*.md"
  broken_target: ".yaml"
  action: ignore
  reason_filter: missing_file
  note: "File extension example in backticks - informational code formatting"

- pattern: "**/*.md"
  broken_target: ".txt"
  action: ignore
  reason_filter: missing_file
  note: "File extension example in backticks - informational code formatting"

- pattern: "**/*.md"
  broken_target: "__init__.py"
  action: ignore
  reason_filter: missing_file
  note: "Generic Python package file - code reference, not doc link"

- pattern: "**/*.md"
  broken_target: ".gitignore"
  action: ignore
  reason_filter: missing_file
  note: "Git config file - code reference, not doc link"

- pattern: "**/*.md"
  broken_target: ".env"
  action: ignore
  reason_filter: missing_file
  note: "Environment config file - code reference, not doc link"

# VCS/runtime directories (code references)
- pattern: "**/*.md"
  broken_target: ".git/"
  action: ignore
  reason_filter: missing_file
  note: "Git directory - code reference, not doc link"

- pattern: "**/*.md"
  broken_target: "logs/"
  action: ignore
  reason_filter: missing_file
  note: "Runtime log directory - code reference, not doc link"

# API endpoints in backticks (informational, not file paths)
- pattern: "**/*.md"
  broken_target: "/health"
  action: ignore
  reason_filter: missing_file
  note: "HTTP API endpoint - informational reference, not file path"

# =============================================================================
# PHASE 10: BUILD-168 CHANGELOG-specific Missing Files
# =============================================================================

# Historical BUILD-129 docs (removed/consolidated)
- pattern: "docs/CHANGELOG.md"
  broken_target: "docs/BUILD-129_TOKEN_ESTIMATOR.md"
  action: ignore
  reason_filter: missing_file
  note: "BUILD-129 docs consolidated into later builds"

- pattern: "docs/CHANGELOG.md"
  broken_target: "docs/BUILD-129_CONTINUATION_RECOVERY.md"
  action: ignore
  reason_filter: missing_file
  note: "BUILD-129 docs consolidated into later builds"

- pattern: "docs/CHANGELOG.md"
  broken_target: "docs/BUILD-129_NDJSON_FORMAT.md"
  action: ignore
  reason_filter: missing_file
  note: "BUILD-129 docs consolidated into later builds"

# Temporary/example requirement files
- pattern: "**/*.md"
  broken_target: "req1.txt"
  action: ignore
  reason_filter: missing_file
  note: "Example/temporary file reference in historical context"

- pattern: "**/*.md"
  broken_target: "req2.txt"
  action: ignore
  reason_filter: missing_file
  note: "Example/temporary file reference in historical context"

- pattern: "**/*.md"
  broken_target: "requirements-1.txt"
  action: ignore
  reason_filter: missing_file
  note: "Example/temporary file reference in historical context"

- pattern: "**/*.md"
  broken_target: "requirements-2.txt"
  action: ignore
  reason_filter: missing_file
  note: "Example/temporary file reference in historical context"

# Historical script references
- pattern: "**/*.md"
  broken_target: "run_parallel.py"
  action: ignore
  reason_filter: missing_file
  note: "Historical script reference - may have been refactored or removed"

# Temporary directories and runtime paths
- pattern: "**/*.md"
  broken_target: "/tmp"
  action: ignore
  reason_filter: missing_file
  note: "System temporary directory - runtime reference"

- pattern: "**/*.md"
  broken_target: "/token-efficiency"
  action: ignore
  reason_filter: missing_file
  note: "API endpoint - runtime reference, not file path"

- pattern: "**/*.md"
  broken_target: "/phase6-stats"
  action: ignore
  reason_filter: missing_file
  note: "API endpoint - runtime reference, not file path"

# Archive directories
- pattern: "**/*.md"
  broken_target: "archive/replay_results/"
  action: ignore
  reason_filter: missing_file
  note: "Runtime-generated archive directory - created on demand"

- pattern: "**/*.md"
  broken_target: "archive/analysis/"
  action: ignore
  reason_filter: missing_file
  note: "Runtime-generated archive directory - created on demand"

# Additional file extensions (informational code references)
- pattern: "**/*.md"
  broken_target: ".py"
  action: ignore
  reason_filter: missing_file
  note: "File extension example - informational code reference"

- pattern: "**/*.md"
  broken_target: ".sql"
  action: ignore
  reason_filter: missing_file
  note: "File extension example - informational code reference"

# Runtime directories
- pattern: "**/*.md"
  broken_target: "plans/"
  action: ignore
  reason_filter: missing_file
  note: "Runtime planning directory - created on demand"

- pattern: "**/*.md"
  broken_target: "unsorted/"
  action: ignore
  reason_filter: missing_file
  note: "Temporary sorting directory - runtime artifact"

- pattern: "**/*.md"
  broken_target: "superseded/"
  action: ignore
  reason_filter: missing_file
  note: "Archived superseded content - historical reference"

# Runtime configuration files
- pattern: "**/*.md"
  broken_target: "tidy_scope.yaml"
  action: ignore
  reason_filter: missing_file
  note: "Runtime config file - created on demand"

- pattern: "**/*.md"
  broken_target: "project_learned_rules.json"
  action: ignore
  reason_filter: missing_file
  note: "Runtime learned rules - created during execution"

- pattern: "**/*.md"
  broken_target: "gold_set.json"
  action: ignore
  reason_filter: missing_file
  note: "Test/validation artifact - created on demand"

- pattern: "**/*.md"
  broken_target: "models.yaml"
  action: ignore
  reason_filter: missing_file
  note: "Model config - may be runtime-generated"

- pattern: "**/*.md"
  broken_target: "tidy_execution.log"
  action: ignore
  reason_filter: missing_file
  note: "Runtime log file - created during tidy operations"

# API endpoints
- pattern: "**/*.md"
  broken_target: "/update_status"
  action: ignore
  reason_filter: missing_file
  note: "HTTP API endpoint - runtime reference, not file path"

- pattern: "**/*.md"
  broken_target: "/dashboard"
  action: ignore
  reason_filter: missing_file
  note: "HTTP API endpoint - runtime reference, not file path"

# Historical script references
- pattern: "**/*.md"
  broken_target: "probe_script.py"
  action: ignore
  reason_filter: missing_file
  note: "Historical script reference - may have been refactored"

- pattern: "**/*.md"
  broken_target: "run_full_probe_suite.sh"
  action: ignore
  reason_filter: missing_file
  note: "Historical script reference - may have been refactored"

- pattern: "**/*.md"
  broken_target: "add_storage_optimizer_tables.py"
  action: ignore
  reason_filter: missing_file
  note: "Migration script - may be in archive or deprecated"

# Historical test files
- pattern: "**/*.md"
  broken_target: "test_artifact_history_pack.py"
  action: ignore
  reason_filter: missing_file
  note: "Historical test file - may have been moved or removed"

- pattern: "**/*.md"
  broken_target: "test_auditor_400.py"
  action: ignore
  reason_filter: missing_file
  note: "Historical test file - may have been moved or removed"

# Historical docs
- pattern: "**/*.md"
  broken_target: "REPORT_TIDY_V7.md"
  action: ignore
  reason_filter: missing_file
  note: "Historical report - may have been archived"

- pattern: "**/*.md"
  broken_target: "ANALYSIS_PHASE_PLAN.md"
  action: ignore
  reason_filter: missing_file
  note: "Historical planning doc - may have been archived"

# Runtime example directories
- pattern: "**/*.md"
  broken_target: "examples/telemetry_utils/"
  action: ignore
  reason_filter: missing_file
  note: "Example directory - may not exist in all environments"

# =============================================================================
# PHASE 11: BUILD-167 Missing Docs - Redirect Stubs Needed
# =============================================================================

# SOT_BUNDLE.md - frequently referenced, redirect to BUILD-163 SOT docs
- pattern: "**/*.md"
  broken_target: "SOT_BUNDLE.md"
  action: create_stub
  stub_target: "docs/BUILD-163_SOT_DB_SYNC.md"
  stub_title: "SOT Bundle Documentation"
  note: "Redirect stub pointing to BUILD-163 SOT DB Sync documentation"

- pattern: "**/*.md"
  broken_target: "docs/SOT_BUNDLE.md"
  action: create_stub
  stub_target: "BUILD-163_SOT_DB_SYNC.md"
  stub_title: "SOT Bundle Documentation"
  note: "Redirect stub pointing to BUILD-163 SOT DB Sync documentation"

# CONSOLIDATED_DEBUG.md - redirect to DEBUG_LOG.md
- pattern: "**/*.md"
  broken_target: "CONSOLIDATED_DEBUG.md"
  action: create_stub
  stub_target: "docs/DEBUG_LOG.md"
  stub_title: "Consolidated Debug Log"
  note: "Redirect stub pointing to DEBUG_LOG.md (consolidated debug information)"

- pattern: "**/*.md"
  broken_target: "docs/CONSOLIDATED_DEBUG.md"
  action: create_stub
  stub_target: "DEBUG_LOG.md"
  stub_title: "Consolidated Debug Log"
  note: "Redirect stub pointing to DEBUG_LOG.md (consolidated debug information)"
