faiss library not installed; FaissStore will use in-memory fallback
[2025-12-24 15:14:13] INFO: Applying pre-emptive encoding fix...
[2025-12-24 15:14:13] INFO: [Recovery] Fixing Unicode encoding error...
[drain] run_id=fileorg-p2-20251208m queued=6 complete=1 failed=2
[drain] Starting batch 1 (max-iterations=3)...
[2025-12-24 15:14:13] INFO: [Recovery] SUCCESS: Encoding fixed (UTF-8 enabled)
[2025-12-24 15:14:13] INFO: Database tables initialized
[2025-12-24 15:14:13] INFO: Loaded BuilderOutputConfig: max_lines_for_full_file=1000, max_lines_hard_limit=1000
[2025-12-24 15:14:13] INFO: Doctor execute_fix enabled: True
[2025-12-24 15:14:13] INFO: FileSizeTelemetry initialized: .autonomous_runs\autopack\file_size_telemetry.jsonl
[2025-12-24 15:14:22] WARNING: [Qdrant] Connection check failed for localhost:6333: [WinError 10061] No connection could be made because the target machine actively refused it
[2025-12-24 15:14:24] WARNING: [MemoryService] Qdrant unavailable at localhost:6333; falling back to FAISS ([WinError 10061] No connection could be made because the target machine actively refused it)
[2025-12-24 15:14:24] INFO: [FAISS] Created collection 'code_docs' with dim=1536
[2025-12-24 15:14:24] INFO: [FAISS] Created collection 'run_summaries' with dim=1536
[2025-12-24 15:14:24] INFO: [FAISS] Created collection 'errors_ci' with dim=1536
[2025-12-24 15:14:24] INFO: [FAISS] Created collection 'doctor_hints' with dim=1536
[2025-12-24 15:14:24] INFO: [FAISS] Created collection 'planning' with dim=1536
[2025-12-24 15:14:24] INFO: [MemoryService] Initialized (backend=faiss, enabled=True, top_k=5)
[2025-12-24 15:14:24] INFO: MemoryService initialized (enabled=True)
[2025-12-24 15:14:24] INFO: [FileLayout] Project: file-organizer-app-v1, Family: fileorg-p2-20251208m, Base: .autonomous_runs\file-organizer-app-v1\runs\fileorg-p2-20251208m
[2025-12-24 15:14:24] INFO: Initialized autonomous executor for run: fileorg-p2-20251208m
[2025-12-24 15:14:24] INFO: API URL: http://localhost:8000
[2025-12-24 15:14:24] INFO: Workspace: .
[2025-12-24 15:14:24] INFO: Running proactive startup checks from DEBUG_JOURNAL.md...
[2025-12-24 15:14:24] INFO: [HIGH] Checking: Windows Unicode Fix (PYTHONUTF8)
[2025-12-24 15:14:24] INFO:   Reason: Prevents UnicodeEncodeError with emoji characters in logs (Issue #3)
[2025-12-24 15:14:24] INFO:   Check PASSED
[2025-12-24 15:14:24] INFO: [SchemaValidator] Starting database schema validation...
[2025-12-24 15:14:24] INFO: [SchemaValidator] âœ… Database schema validation PASSED
[2025-12-24 15:14:24] INFO: Startup checks complete
[2025-12-24 15:14:25] INFO: [BUILD-123v2] Manifest generator initialized (deterministic scope generation)
[2025-12-24 15:14:26] INFO: [HealthCheck:T0] API Keys: PASSED (0ms) - All required API keys present
[2025-12-24 15:14:26] INFO: [HealthCheck:T0] Database: PASSED (0ms) - Database accessible: c:\dev\Autopack\autopack.db
[2025-12-24 15:14:26] INFO: [HealthCheck:T0] Workspace: PASSED (0ms) - Workspace valid: c:\dev\Autopack
[2025-12-24 15:14:26] INFO: [HealthCheck:T0] Config: PASSED (32ms) - Configuration files valid
[2025-12-24 15:14:26] INFO: [HealthCheck:T0] Vector Memory: PASSED (1222ms) - Qdrant unreachable at localhost:6333; autostart attempted or unavailable. Falling back to FAISS.
[2025-12-24 15:14:26] INFO: [BUILD-127] Completion authority initialized (PhaseFinalizer + TestBaselineTracker)
[2025-12-24 15:14:26] INFO: [BUILD-127] Capturing T0 baseline at commit 1dc6756e...
[2025-12-24 15:14:26] INFO: [Baseline] Capturing baseline for commit 1dc6756e
[2025-12-24 15:14:59] INFO: [Baseline] Captured: 0/0 passing, 0 failing, 0 errors
[2025-12-24 15:14:59] INFO: [BUILD-127] T0 baseline: 0 tests, 0 passing, 0 failing, 0 errors
[2025-12-24 15:14:59] INFO: Starting autonomous execution loop...
[2025-12-24 15:14:59] INFO: Poll interval: 10s
[2025-12-24 15:14:59] INFO: Max iterations: 3
[2025-12-24 15:14:59] INFO: API server is already running
[2025-12-24 15:14:59] INFO: Initializing infrastructure...
[2025-12-24 15:15:03] INFO: LlmService: Initialized with ModelRouter and UsageRecorder
[2025-12-24 15:15:03] INFO: Quality Gate: Initialized
[2025-12-24 15:15:03] INFO: Iteration 1: Fetching run status...
[2025-12-24 15:15:03] INFO: [BUILD-041] Next phase: fileorg-p2-country-uk
[2025-12-24 15:15:03] INFO: [Scope] Workspace root determined from scope prefix: C:\dev\Autopack\fileorganizer
[2025-12-24 15:15:03] INFO: [fileorg-p2-country-uk] Step 1/4: Generating code with Builder (via LlmService)...
[2025-12-24 15:15:03] INFO: [fileorg-p2-country-uk] Using scope-aware context (overrides targeted context)
[2025-12-24 15:15:03] INFO: [Scope] Workspace root determined from scope prefix: C:\dev\Autopack\fileorganizer
[2025-12-24 15:15:03] INFO: [Scope] Loaded 3 files from scope configuration
[2025-12-24 15:15:03] INFO: [Scope] Scope paths: ['fileorganizer/backend/packs/tax_uk.yaml', 'fileorganizer/backend/packs/immigration_uk.yaml', 'fileorganizer/backend/tests/']
[2025-12-24 15:15:03] INFO: [Scope] Loaded paths: ['fileorganizer/backend/packs/tax_uk.yaml', 'fileorganizer/backend/packs/immigration_uk.yaml', 'fileorganizer/backend/tests/test_uk_packs.py']...
[2025-12-24 15:15:03] INFO: [fileorg-p2-country-uk] Loaded 3 files for context
[2025-12-24 15:15:03] INFO: [Scope] Workspace root determined from scope prefix: C:\dev\Autopack\fileorganizer
[2025-12-24 15:15:03] INFO: [Scope] Validation passed: 3 files match scope configuration
[2025-12-24 15:15:03] INFO: [fileorg-p2-country-uk] Built deliverables contract: 3 required paths, 0 forbidden patterns
[2025-12-24 15:15:03] INFO: [fileorg-p2-country-uk] Deliverables manifest gate PASSED (3 paths)
[2025-12-24 15:15:03] INFO: [ModelSelector] Selected claude-sonnet-4-5 for builder (complexity=medium, attempt=0, intra_tier=0)
[2025-12-24 15:15:03] INFO: [MODEL-SELECT] Builder: model=claude-sonnet-4-5, complexity=medium->medium, attempt=0, category=backend
[2025-12-24 15:15:03] WARNING: CONSOLIDATED_DEBUG.md not found at c:\dev\Autopack\.autonomous_runs\file-organizer-app-v1\archive\CONSOLIDATED_DEBUG.md
[2025-12-24 15:15:05] INFO: HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
[2025-12-24 15:15:47] INFO: [TOKEN_BUDGET] phase=fileorg-p2-country-uk complexity=medium input=8091 output=4958/16384 total=13049 utilization=30.3% model=claude-sonnet-4-5
[2025-12-24 15:15:47] INFO: [Builder] Generated 1 file diffs locally from full-file content
[2025-12-24 15:15:47] INFO: [fileorg-p2-country-uk] Builder succeeded (13049 tokens)
[2025-12-24 15:15:47] INFO: [fileorg-p2-country-uk] Deliverables validation:
[2025-12-24 15:15:47] INFO:   Expected: 3 files
[2025-12-24 15:15:47] INFO:   Found in patch: 1 files
[2025-12-24 15:15:47] ERROR: [fileorg-p2-country-uk] âŒ Deliverables validation FAILED
[2025-12-24 15:15:47] ERROR: [fileorg-p2-country-uk]    Missing 2 required deliverables:
[2025-12-24 15:15:47] ERROR: [fileorg-p2-country-uk]      - fileorganizer/backend/packs/immigration_uk.yaml
[2025-12-24 15:15:47] ERROR: [fileorg-p2-country-uk]      - fileorganizer/backend/packs/tax_uk.yaml
[2025-12-24 15:15:47] ERROR: [fileorg-p2-country-uk] Deliverables validation failed
[2025-12-24 15:15:47] ERROR: [fileorg-p2-country-uk] âŒ DELIVERABLES VALIDATION FAILED

Your patch does not create the required deliverable files.

ðŸ“‹ REQUIRED DELIVERABLES:
  âœ“ fileorganizer/backend/packs/immigration_uk.yaml
  âœ“ fileorganizer/backend/packs/tax_uk.yaml
  âœ“ fileorganizer/backend/tests/

ðŸ“„ FILES IN YOUR PATCH:
  â€¢ fileorganizer/backend/tests/test_uk_packs.py

âœ… ALLOWED ROOTS (you may ONLY create files under these prefixes):
  - fileorganizer/backend/

âŒ MISSING FILES:
  - fileorganizer/backend/packs/immigration_uk.yaml
  - fileorganizer/backend/packs/tax_uk.yaml

ðŸ”§ ACTION REQUIRED:
Please regenerate the patch with files in the correct locations.
Ensure all file paths match the deliverables specification exactly.
[2025-12-24 15:16:27] INFO: [MemoryService] Stored decision log
[2025-12-24 15:16:27] INFO: [RetrievalTrigger] Phase fileorg-p2-country-uk attempt 1: Error messages lack context - triggering deep retrieval
[2025-12-24 15:16:27] INFO: [DeepRetrieval] Starting bounded retrieval for phase fileorg-p2-country-uk (priority=medium)
[2025-12-24 15:16:28] INFO: [DeepRetrieval] Retrieved 0 run artifacts (0 bytes), 1 SOT files (15360 bytes), 0 memory entries (0 bytes)
[2025-12-24 15:16:28] WARNING: [fileorg-p2-country-uk] Attempt 1/5 failed, will escalate model for next retry
[2025-12-24 15:16:28] WARNING: Phase fileorg-p2-country-uk finished with status: DELIVERABLES_VALIDATION_FAILED
[2025-12-24 15:16:28] INFO: Waiting 10s before next phase...
[2025-12-24 15:16:38] INFO: Iteration 2: Fetching run status...
[2025-12-24 15:16:38] INFO: [BUILD-041] Next phase: fileorg-p2-country-uk
[2025-12-24 15:16:38] INFO: [Scope] Workspace root determined from scope prefix: C:\dev\Autopack\fileorganizer
[2025-12-24 15:16:38] INFO: [fileorg-p2-country-uk] Step 1/4: Generating code with Builder (via LlmService)...
[2025-12-24 15:16:38] INFO: [fileorg-p2-country-uk] Using scope-aware context (overrides targeted context)
[2025-12-24 15:16:38] INFO: [Scope] Workspace root determined from scope prefix: C:\dev\Autopack\fileorganizer
[2025-12-24 15:16:38] INFO: [Scope] Loaded 3 files from scope configuration
[2025-12-24 15:16:38] INFO: [Scope] Scope paths: ['fileorganizer/backend/packs/tax_uk.yaml', 'fileorganizer/backend/packs/immigration_uk.yaml', 'fileorganizer/backend/tests/']
[2025-12-24 15:16:38] INFO: [Scope] Loaded paths: ['fileorganizer/backend/packs/tax_uk.yaml', 'fileorganizer/backend/packs/immigration_uk.yaml', 'fileorganizer/backend/tests/test_uk_packs.py']...
[2025-12-24 15:16:38] INFO: [fileorg-p2-country-uk] Loaded 3 files for context
[2025-12-24 15:16:38] INFO: [Scope] Workspace root determined from scope prefix: C:\dev\Autopack\fileorganizer
[2025-12-24 15:16:38] INFO: [Scope] Validation passed: 3 files match scope configuration
[2025-12-24 15:16:38] INFO: [fileorg-p2-country-uk] Retrieved 300 chars of context from memory
[2025-12-24 15:16:38] INFO: [fileorg-p2-country-uk] Built deliverables contract: 3 required paths, 0 forbidden patterns
[2025-12-24 15:16:38] INFO: [fileorg-p2-country-uk] Deliverables manifest gate PASSED (3 paths)
[2025-12-24 15:16:38] INFO: [ModelSelector] Selected claude-sonnet-4-5 for builder (complexity=medium, attempt=0, intra_tier=0)
[2025-12-24 15:16:38] INFO: [MODEL-SELECT] Builder: model=claude-sonnet-4-5, complexity=medium->medium, attempt=0, category=backend
[2025-12-24 15:16:38] WARNING: CONSOLIDATED_DEBUG.md not found at c:\dev\Autopack\.autonomous_runs\file-organizer-app-v1\archive\CONSOLIDATED_DEBUG.md
[2025-12-24 15:16:43] INFO: Retrying request to /v1/messages in 0.472158 seconds
[2025-12-24 15:16:48] INFO: Retrying request to /v1/messages in 0.961403 seconds
[2025-12-24 15:16:55] INFO: HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
[2025-12-24 15:18:31] INFO: [TOKEN_BUDGET] phase=fileorg-p2-country-uk complexity=medium input=8195 output=7625/16384 total=15820 utilization=46.5% model=claude-sonnet-4-5
[2025-12-24 15:18:31] INFO: [Builder] Skipping growth guard for YAML file fileorganizer/backend/packs/tax_uk.yaml (growth 1.0x)
[2025-12-24 15:18:31] INFO: [Builder] Skipping growth guard for YAML file fileorganizer/backend/packs/immigration_uk.yaml (growth 1.0x)
[2025-12-24 15:18:31] ERROR: [fileorg-p2-country-uk] Builder failed: No valid file changes generated
[2025-12-24 15:18:31] INFO: Updated phase fileorg-p2-country-uk status to FAILED
[2025-12-24 15:19:11] INFO: [MemoryService] Stored decision log
[2025-12-24 15:19:11] INFO: [RetrievalTrigger] Phase fileorg-p2-country-uk attempt 1: Error messages lack context - triggering deep retrieval
[2025-12-24 15:19:11] INFO: [DeepRetrieval] Starting bounded retrieval for phase fileorg-p2-country-uk (priority=medium)
[2025-12-24 15:19:12] INFO: [DeepRetrieval] Retrieved 0 run artifacts (0 bytes), 1 SOT files (15360 bytes), 0 memory entries (0 bytes)
[2025-12-24 15:19:12] WARNING: [fileorg-p2-country-uk] Attempt 1/5 failed, will escalate model for next retry
[2025-12-24 15:19:12] WARNING: Phase fileorg-p2-country-uk finished with status: FAILED
[2025-12-24 15:19:12] INFO: Waiting 10s before next phase...
[2025-12-24 15:19:22] INFO: Iteration 3: Fetching run status...
[2025-12-24 15:19:22] INFO: [BUILD-041] Next phase: fileorg-p2-country-canada
[2025-12-24 15:19:22] INFO: [Scope] Workspace root determined from scope prefix: C:\dev\Autopack\fileorganizer
[2025-12-24 15:19:22] INFO: [fileorg-p2-country-canada] Step 1/4: Generating code with Builder (via LlmService)...
[2025-12-24 15:19:22] INFO: [fileorg-p2-country-canada] Using scope-aware context (overrides targeted context)
[2025-12-24 15:19:22] INFO: [Scope] Workspace root determined from scope prefix: C:\dev\Autopack\fileorganizer
[2025-12-24 15:19:22] WARNING: [Scope] Missing scope files: ['fileorganizer/backend/packs/tax_canada.yaml', 'fileorganizer/backend/packs/immigration_canada.yaml']
[2025-12-24 15:19:22] INFO: [Scope] Loaded 5 files from scope configuration
[2025-12-24 15:19:22] INFO: [Scope] Scope paths: ['fileorganizer/backend/packs/tax_canada.yaml', 'fileorganizer/backend/packs/immigration_canada.yaml', 'fileorganizer/backend/tests/']
[2025-12-24 15:19:22] INFO: [Scope] Loaded paths: ['fileorganizer/backend/packs/tax_canada.yaml', 'fileorganizer/backend/packs/immigration_canada.yaml', 'fileorganizer/backend/tests/test_uk_packs.py', 'fileorganizer/backend/packs/immigration_uk.yaml', 'fileorganizer/backend/packs/tax_uk.yaml']...
[2025-12-24 15:19:22] INFO: [fileorg-p2-country-canada] Loaded 5 files for context
[2025-12-24 15:19:22] INFO: [Scope] Workspace root determined from scope prefix: C:\dev\Autopack\fileorganizer
[2025-12-24 15:19:22] INFO: [Scope] Validation passed: 5 files match scope configuration
[2025-12-24 15:19:22] INFO: [fileorg-p2-country-canada] Learning context: 0 rules, 4 hints
[2025-12-24 15:19:22] INFO: [fileorg-p2-country-canada] Retrieved 572 chars of context from memory
[2025-12-24 15:19:22] INFO: [fileorg-p2-country-canada] Built deliverables contract: 3 required paths, 0 forbidden patterns
[2025-12-24 15:19:22] INFO: [fileorg-p2-country-canada] Deliverables manifest gate PASSED (3 paths)
[2025-12-24 15:19:22] INFO: [ModelSelector] Selected claude-sonnet-4-5 for builder (complexity=medium, attempt=0, intra_tier=0)
[2025-12-24 15:19:22] INFO: [MODEL-SELECT] Builder: model=claude-sonnet-4-5, complexity=medium->medium, attempt=0, category=backend
[2025-12-24 15:19:22] WARNING: CONSOLIDATED_DEBUG.md not found at c:\dev\Autopack\.autonomous_runs\file-organizer-app-v1\archive\CONSOLIDATED_DEBUG.md
[2025-12-24 15:19:24] INFO: HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
[2025-12-24 15:21:34] INFO: [TOKEN_BUDGET] phase=fileorg-p2-country-canada complexity=medium input=9764 output=9872/16384 total=19636 utilization=60.3% model=claude-sonnet-4-5
[2025-12-24 15:21:34] INFO: [Builder] Generated 3 file diffs locally from full-file content
[2025-12-24 15:21:34] INFO: [fileorg-p2-country-canada] Builder succeeded (19636 tokens)
[2025-12-24 15:21:34] INFO: [fileorg-p2-country-canada] Deliverables validation:
[2025-12-24 15:21:34] INFO:   Expected: 3 files
[2025-12-24 15:21:34] INFO:   Found in patch: 3 files
[2025-12-24 15:21:34] INFO: [fileorg-p2-country-canada] âœ… Deliverables validation PASSED
[2025-12-24 15:21:34] INFO: [fileorg-p2-country-canada] Step 2/5: Applying patch...
[2025-12-24 15:21:34] INFO: Writing patch to temp_patch.diff
[2025-12-24 15:21:34] INFO: Checking if patch can be applied (dry run)...
[2025-12-24 15:21:34] INFO: Applying patch to filesystem...
[2025-12-24 15:21:34] INFO: Patch applied successfully - 3 files modified
[2025-12-24 15:21:34] INFO:   - fileorganizer/backend/packs/tax_canada.yaml
[2025-12-24 15:21:34] INFO:   - fileorganizer/backend/packs/immigration_canada.yaml
[2025-12-24 15:21:34] INFO:   - fileorganizer/backend/tests/test_canada_packs.py
[2025-12-24 15:21:34] INFO: [Validation] All 3 modified files validated successfully
[2025-12-24 15:21:34] INFO: [fileorg-p2-country-canada] Patch applied successfully to filesystem
[2025-12-24 15:21:34] INFO: [fileorg-p2-country-canada] Step 3/5: Running CI checks...
[2025-12-24 15:21:34] INFO: [fileorg-p2-country-canada] Running CI checks (pytest)...
[2025-12-24 15:21:47] INFO: [fileorg-p2-country-canada] CI checks PASSED: 58/58 tests passed in 12.7s
[2025-12-24 15:21:47] INFO: [fileorg-p2-country-canada] Step 4/5: Reviewing patch with Auditor (via LlmService)...
[2025-12-24 15:21:47] INFO: [ModelSelector] Selected claude-sonnet-4-5 for auditor (complexity=medium, attempt=0, intra_tier=0)
[2025-12-24 15:21:47] INFO: [MODEL-SELECT] Auditor: model=claude-sonnet-4-5, complexity=medium->medium, attempt=0, category=backend
[2025-12-24 15:21:47] WARNING: CONSOLIDATED_DEBUG.md not found at c:\dev\Autopack\.autonomous_runs\file-organizer-app-v1\archive\CONSOLIDATED_DEBUG.md
[2025-12-24 15:21:59] INFO: HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
[2025-12-24 15:21:59] INFO: [fileorg-p2-country-canada] Auditor completed: approved=False, issues=1
[2025-12-24 15:21:59] INFO: [fileorg-p2-country-canada] Step 5/5: Applying Quality Gate...
[2025-12-24 15:21:59] INFO: [fileorg-p2-country-canada] Quality Gate: BLOCKED
[2025-12-24 15:21:59] WARNING: [fileorg-p2-country-canada] Phase BLOCKED by quality gate
[2025-12-24 15:21:59] WARNING:   - Auditor rejected changes
[2025-12-24 15:21:59] INFO: [fileorg-p2-country-canada] Requesting human approval via Telegram...
[2025-12-24 15:21:59] INFO: [fileorg-p2-country-canada] âœ… Approval GRANTED (auto-approved)
[2025-12-24 15:21:59] INFO: [fileorg-p2-country-canada] Human approval GRANTED - proceeding with phase
[2025-12-24 15:21:59] WARNING: [fileorg-p2-country-canada] Could not parse applied files: cannot import name 'parse_patch_stats' from 'autopack.governed_apply' (c:\dev\Autopack\src\autopack\governed_apply.py)
[2025-12-24 15:21:59] INFO: [PhaseFinalizer] Assessing completion for phase fileorg-p2-country-canada
[2025-12-24 15:21:59] WARNING: [PhaseFinalizer] CI result missing report_path
[2025-12-24 15:21:59] ERROR: [PhaseFinalizer] BLOCK: Quality gate blocked (BLOCKED)
[2025-12-24 15:21:59] ERROR: [PhaseFinalizer] âŒ Phase fileorg-p2-country-canada BLOCKED: Quality gate blocked: BLOCKED
[2025-12-24 15:21:59] ERROR: [fileorg-p2-country-canada] Phase finalization BLOCKED: Quality gate blocked: BLOCKED
[2025-12-24 15:21:59] ERROR:   âŒ Quality gate blocked: BLOCKED
[2025-12-24 15:21:59] INFO: Updated phase fileorg-p2-country-canada status to FAILED
[2025-12-24 15:22:39] INFO: [MemoryService] Stored decision log
[2025-12-24 15:22:39] INFO: [RetrievalTrigger] Phase fileorg-p2-country-canada attempt 1: Error messages lack context - triggering deep retrieval
[2025-12-24 15:22:39] INFO: [DeepRetrieval] Starting bounded retrieval for phase fileorg-p2-country-canada (priority=medium)
[2025-12-24 15:22:40] INFO: [DeepRetrieval] Retrieved 0 run artifacts (0 bytes), 1 SOT files (15360 bytes), 0 memory entries (0 bytes)
[2025-12-24 15:22:40] WARNING: [fileorg-p2-country-canada] Attempt 1/5 failed, will escalate model for next retry
[2025-12-24 15:22:40] WARNING: Phase fileorg-p2-country-canada finished with status: Quality gate blocked: BLOCKED
[2025-12-24 15:22:40] INFO: Reached max iterations (3), stopping
[2025-12-24 15:22:40] INFO: Autonomous execution loop finished
[2025-12-24 15:22:40] INFO: [ARCHIVE_CONSOLIDATOR] Logged build event: RUN_PAUSED
[2025-12-24 15:22:42] INFO: Applying pre-emptive encoding fix...
[2025-12-24 15:22:42] INFO: [Recovery] Fixing Unicode encoding error...
Quality Gate: PASS
Blocking: False

Risk Assessment:
  auditor_approved: False
  ci_passed: False
  coverage_delta: 0.0
  files_changed_count: 0
[drain] run_id=fileorg-p2-20251208m queued=4 complete=1 failed=4
[drain] Starting batch 2 (max-iterations=3)...
[2025-12-24 15:22:42] INFO: [Recovery] SUCCESS: Encoding fixed (UTF-8 enabled)
[2025-12-24 15:22:42] INFO: Database tables initialized
[2025-12-24 15:22:42] INFO: Loaded BuilderOutputConfig: max_lines_for_full_file=1000, max_lines_hard_limit=1000
[2025-12-24 15:22:42] INFO: Doctor execute_fix enabled: True
[2025-12-24 15:22:42] INFO: FileSizeTelemetry initialized: .autonomous_runs\autopack\file_size_telemetry.jsonl
[2025-12-24 15:22:52] WARNING: [Qdrant] Connection check failed for localhost:6333: [WinError 10061] No connection could be made because the target machine actively refused it
[2025-12-24 15:22:53] WARNING: [MemoryService] Qdrant unavailable at localhost:6333; falling back to FAISS ([WinError 10061] No connection could be made because the target machine actively refused it)
[2025-12-24 15:22:53] INFO: [FAISS] Created collection 'code_docs' with dim=1536
[2025-12-24 15:22:53] INFO: [FAISS] Created collection 'run_summaries' with dim=1536
[2025-12-24 15:22:53] INFO: [FAISS] Created collection 'errors_ci' with dim=1536
[2025-12-24 15:22:53] INFO: [FAISS] Created collection 'doctor_hints' with dim=1536
[2025-12-24 15:22:53] INFO: [FAISS] Created collection 'planning' with dim=1536
[2025-12-24 15:22:53] INFO: [MemoryService] Initialized (backend=faiss, enabled=True, top_k=5)
[2025-12-24 15:22:53] INFO: MemoryService initialized (enabled=True)
[2025-12-24 15:22:53] INFO: [FileLayout] Project: file-organizer-app-v1, Family: fileorg-p2-20251208m, Base: .autonomous_runs\file-organizer-app-v1\runs\fileorg-p2-20251208m
[2025-12-24 15:22:53] INFO: Initialized autonomous executor for run: fileorg-p2-20251208m
[2025-12-24 15:22:53] INFO: API URL: http://localhost:8000
[2025-12-24 15:22:53] INFO: Workspace: .
[2025-12-24 15:22:53] INFO: Running proactive startup checks from DEBUG_JOURNAL.md...
[2025-12-24 15:22:53] INFO: [HIGH] Checking: Windows Unicode Fix (PYTHONUTF8)
[2025-12-24 15:22:53] INFO:   Reason: Prevents UnicodeEncodeError with emoji characters in logs (Issue #3)
[2025-12-24 15:22:53] INFO:   Check PASSED
[2025-12-24 15:22:53] INFO: [SchemaValidator] Starting database schema validation...
[2025-12-24 15:22:53] INFO: [SchemaValidator] âœ… Database schema validation PASSED
[2025-12-24 15:22:53] INFO: Startup checks complete
[2025-12-24 15:22:54] INFO: [BUILD-123v2] Manifest generator initialized (deterministic scope generation)
[2025-12-24 15:22:55] INFO: [HealthCheck:T0] API Keys: PASSED (0ms) - All required API keys present
[2025-12-24 15:22:55] INFO: [HealthCheck:T0] Database: PASSED (0ms) - Database accessible: c:\dev\Autopack\autopack.db
[2025-12-24 15:22:55] INFO: [HealthCheck:T0] Workspace: PASSED (0ms) - Workspace valid: c:\dev\Autopack
[2025-12-24 15:22:55] INFO: [HealthCheck:T0] Config: PASSED (54ms) - Configuration files valid
[2025-12-24 15:22:55] INFO: [HealthCheck:T0] Vector Memory: PASSED (1222ms) - Qdrant unreachable at localhost:6333; autostart attempted or unavailable. Falling back to FAISS.
[2025-12-24 15:22:55] INFO: [BUILD-127] Completion authority initialized (PhaseFinalizer + TestBaselineTracker)
[2025-12-24 15:22:55] INFO: [BUILD-127] Capturing T0 baseline at commit 1dc6756e...
[2025-12-24 15:22:55] INFO: [Baseline] Using cached baseline for commit 1dc6756e
[2025-12-24 15:22:55] INFO: [BUILD-127] T0 baseline: 0 tests, 0 passing, 0 failing, 0 errors
[2025-12-24 15:22:55] INFO: Starting autonomous execution loop...
[2025-12-24 15:22:55] INFO: Poll interval: 10s
[2025-12-24 15:22:55] INFO: Max iterations: 3
[2025-12-24 15:22:55] INFO: API server is already running
[2025-12-24 15:22:55] INFO: Initializing infrastructure...
[2025-12-24 15:22:58] INFO: LlmService: Initialized with ModelRouter and UsageRecorder
[2025-12-24 15:22:58] INFO: Quality Gate: Initialized
[2025-12-24 15:22:58] INFO: Iteration 1: Fetching run status...
[2025-12-24 15:22:58] INFO: [BUILD-041] Next phase: fileorg-p2-country-australia
[2025-12-24 15:22:58] INFO: [Scope] Workspace root determined from scope prefix: C:\dev\Autopack\fileorganizer
[2025-12-24 15:22:58] INFO: [fileorg-p2-country-australia] Step 1/4: Generating code with Builder (via LlmService)...
[2025-12-24 15:22:58] INFO: [fileorg-p2-country-australia] Using scope-aware context (overrides targeted context)
[2025-12-24 15:22:58] INFO: [Scope] Workspace root determined from scope prefix: C:\dev\Autopack\fileorganizer
[2025-12-24 15:22:58] WARNING: [Scope] Missing scope files: ['fileorganizer/backend/packs/tax_australia.yaml', 'fileorganizer/backend/packs/immigration_australia.yaml']
[2025-12-24 15:22:58] INFO: [Scope] Loaded 8 files from scope configuration
[2025-12-24 15:22:58] INFO: [Scope] Scope paths: ['fileorganizer/backend/packs/tax_australia.yaml', 'fileorganizer/backend/packs/immigration_australia.yaml', 'fileorganizer/backend/tests/']
[2025-12-24 15:22:58] INFO: [Scope] Loaded paths: ['fileorganizer/backend/packs/tax_australia.yaml', 'fileorganizer/backend/packs/immigration_australia.yaml', 'fileorganizer/backend/tests/test_canada_packs.py', 'fileorganizer/backend/tests/test_uk_packs.py', 'fileorganizer/backend/packs/immigration_canada.yaml', 'fileorganizer/backend/packs/immigration_uk.yaml', 'fileorganizer/backend/packs/tax_canada.yaml', 'fileorganizer/backend/packs/tax_uk.yaml']...
[2025-12-24 15:22:58] INFO: [fileorg-p2-country-australia] Loaded 8 files for context
[2025-12-24 15:22:58] INFO: [Scope] Workspace root determined from scope prefix: C:\dev\Autopack\fileorganizer
[2025-12-24 15:22:58] INFO: [Scope] Validation passed: 8 files match scope configuration
[2025-12-24 15:22:58] INFO: [fileorg-p2-country-australia] Learning context: 0 rules, 5 hints
[2025-12-24 15:22:58] INFO: [fileorg-p2-country-australia] Built deliverables contract: 3 required paths, 0 forbidden patterns
[2025-12-24 15:22:58] INFO: [fileorg-p2-country-australia] Deliverables manifest gate PASSED (3 paths)
[2025-12-24 15:22:58] INFO: [ModelSelector] Selected claude-sonnet-4-5 for builder (complexity=medium, attempt=0, intra_tier=0)
[2025-12-24 15:22:58] INFO: [MODEL-SELECT] Builder: model=claude-sonnet-4-5, complexity=medium->medium, attempt=0, category=backend
[2025-12-24 15:22:58] WARNING: CONSOLIDATED_DEBUG.md not found at c:\dev\Autopack\.autonomous_runs\file-organizer-app-v1\archive\CONSOLIDATED_DEBUG.md
[2025-12-24 15:22:58] INFO: [TOKEN_SOFT_CAP] run_id=unknown phase_id=fileorg-p2-country-australia est_total=29602 soft_cap=32000 (approaching, complexity=medium)
[2025-12-24 15:23:01] INFO: HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
