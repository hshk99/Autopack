# LLM Pricing Configuration
# Per v7 GPT architect recommendation
# Prices in USD per 1,000 tokens

# OpenAI pricing (as of 2024)
# Source: https://openai.com/api/pricing/
openai:
  "gpt-4o-mini":
    input_per_1k: 0.00015   # $0.150 per 1M tokens
    output_per_1k: 0.0006   # $0.600 per 1M tokens

  "gpt-4o":
    input_per_1k: 0.0025    # $2.50 per 1M tokens
    output_per_1k: 0.01     # $10.00 per 1M tokens

  "gpt-4-turbo-2024-04-09":
    input_per_1k: 0.01      # $10.00 per 1M tokens
    output_per_1k: 0.03     # $30.00 per 1M tokens

  # Legacy models (for reference)
  "gpt-3.5-turbo":
    input_per_1k: 0.0005
    output_per_1k: 0.0015

# Anthropic Claude pricing (for future use)
# Source: https://www.anthropic.com/pricing
anthropic:
  "claude-3-opus-20240229":
    input_per_1k: 0.015     # $15.00 per 1M tokens
    output_per_1k: 0.075    # $75.00 per 1M tokens

  "claude-3-sonnet-20240229":
    input_per_1k: 0.003     # $3.00 per 1M tokens
    output_per_1k: 0.015    # $15.00 per 1M tokens

  "claude-3-haiku-20240307":
    input_per_1k: 0.00025   # $0.25 per 1M tokens
    output_per_1k: 0.00125  # $1.25 per 1M tokens

# Cost calculation helpers
cost_calculation:
  # How to calculate total cost for a call
  # total_cost = (input_tokens * input_per_1k / 1000) + (output_tokens * output_per_1k / 1000)

  # Track costs at multiple levels
  track_at_levels:
    - phase    # Cost per phase
    - tier     # Cost per tier
    - run      # Cost per run
    - project  # Cost across all runs (project backlog)

# Budget enforcement
budgets:
  # Maximum cost per run (optional, in addition to token cap)
  run_cost_cap_usd: null  # Set to dollar amount to enable, e.g., 50.0

  # Alert thresholds (percentage of budget used)
  cost_warning_threshold: 0.75  # Warn at 75% of budget
  cost_critical_threshold: 0.90  # Critical alert at 90%

# Cost optimization strategies
optimization:
  # Use cheaper models for retries after initial failure
  use_cheaper_model_on_retry: false

  # Cache common prompts (if LLM provider supports it)
  enable_prompt_caching: false

  # Batch multiple small operations when possible
  enable_batching: false

# Reporting
reporting:
  # Include cost breakdown in run summaries
  include_cost_in_summaries: true

  # Cost metrics to track
  metrics:
    - total_cost_usd
    - cost_per_phase_avg
    - cost_by_task_category
    - cost_by_model
    - builder_cost_vs_auditor_cost
    - cost_per_successful_phase
    - cost_per_failed_phase

# Example cost calculations for reference:
#
# Low complexity phase (gpt-4o-mini):
#   - Builder: 2000 input + 1000 output = $0.0009
#   - Auditor: 1500 input + 500 output = $0.0006
#   - Total: ~$0.0015 per phase
#
# Medium complexity phase (gpt-4o):
#   - Builder: 5000 input + 3000 output = $0.0425
#   - Auditor: 3000 input + 1000 output = $0.0175
#   - Total: ~$0.06 per phase
#
# High complexity phase (gpt-4-turbo):
#   - Builder: 10000 input + 5000 output = $0.25
#   - Auditor: 8000 input + 2000 output = $0.14
#   - Total: ~$0.39 per phase
#
# Estimated run cost (25 phases, mixed complexity):
#   - 5 low + 15 medium + 5 high
#   - ~$0.0075 + $0.90 + $1.95 = ~$2.86 per run
