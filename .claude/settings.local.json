{
  "permissions": {
    "allow": [
      "Bash(gh pr view:*)",
      "Bash(gh pr merge:*)",
      "Bash(git pull:*)",
      "Bash(PYTHONPATH=src PYTHONUTF8=1 python:*)",
      "Bash(pip show:*)",
      "Bash(taskkill:*)",
      "Bash(pkill:*)",
      "Bash(tasklist:*)",
      "Bash(then PYTHONPATH=src venv/Scripts/pytest.exe tests/ -v --tb=line --ignore=tests/backend)",
      "Bash(else PYTHONPATH=src python -m pytest tests/ -v --tb=line --ignore=tests/backend)",
      "Bash(PYTHONPATH=src C:/Python/Scripts/pytest.exe:*)",
      "Bash(git fetch:*)",
      "Bash(PYTHONPATH=src python:*)",
      "Bash(if [ -d \".autonomous_runs/test-goal-anchoring-20251203-022603/errors\" ])",
      "Bash(sqlite3:*)",
      "Bash(git tag:*)",
      "Bash(git checkout:*)",
      "Bash(git stash:*)",
      "Bash(dir /s \"c:\\dev\\Autopack\\.autonomous_runs\")",
      "Bash(find:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src python:*)",
      "Bash(PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python -c:*)",
      "Bash(PYTHONPATH=src pytest:*)",
      "Bash(git apply:*)",
      "Bash(powershell -Command \"Start-Process ''C:\\Program Files\\Docker\\Docker\\Docker Desktop.exe''\")",
      "Bash(PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src pytest:*)",
      "Bash(PYTHONPATH=../src python:*)",
      "Bash(PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python scripts/run_backlog_maintenance.py:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python -c:*)",
      "Bash(tree:*)",
      "Bash(powershell -Command:*)",
      "Bash(PYTHONPATH=src DATABASE_URL=\"postgresql://autopack:autopack@localhost:5432/autopack\" python:*)",
      "Bash(QDRANT_HOST=\"http://localhost:6333\" EMBEDDING_MODEL=\"sentence-transformers/all-MiniLM-L6-v2\" python:*)",
      "Bash(PYTHONUTF8=1 QDRANT_HOST=\"http://localhost:6333\" EMBEDDING_MODEL=\"sentence-transformers/all-MiniLM-L6-v2\" python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"postgresql://autopack:autopack@localhost:5432/autopack\" QDRANT_HOST=\"http://localhost:6333\" python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=../src DATABASE_URL=\"postgresql://autopack:autopack@localhost:5432/autopack\" QDRANT_HOST=\"http://localhost:6333\" python:*)",
      "Bash(PYTHONPATH=src DATABASE_URL=\"postgresql://autopack:autopack@localhost:5432/autopack\" QDRANT_HOST=\"http://localhost:6333\" python:*)",
      "Bash(bash:*)",
      "Bash(PYTHONPATH=../src DATABASE_URL=\"postgresql://autopack:autopack@localhost:5432/autopack\" QDRANT_HOST=\"http://localhost:6333\":*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"postgresql://autopack:autopack@localhost:5432/autopack\" python -m pytest:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"postgresql://autopack:autopack@localhost:5432/autopack\" QDRANT_HOST=\"http://localhost:6333\" python -m pytest:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src PYTHONUNBUFFERED=1 DATABASE_URL=\"postgresql://autopack:autopack@localhost:5432/autopack\" QDRANT_HOST=\"http://localhost:6333\" python:*)",
      "Bash(if [ -d \"archived_runs\" ])",
      "Bash(dir:*)",
      "Bash(xargs:*)",
      "Bash(if [ -d \"c:/dev/Autopack/archive/reports/tidy_v7\" ])",
      "Bash(done)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"postgresql://autopack:autopack@localhost:5432/autopack\" python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=../../src python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=../../src:../../scripts/tidy:../../scripts python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src:scripts/tidy:scripts python:*)",
      "Bash(PYTHONUTF8=1 python scripts/tidy/script_organizer.py:*)",
      "Bash(PYTHONUTF8=1 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=. python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=. timeout 120 python:*)",
      "Bash(PYTHONUTF8=1 cat:*)",
      "Bash(PYTHONUTF8=1 grep:*)",
      "Bash(PYTHONUTF8=1 tail:*)",
      "Bash(PYTHONUTF8=1 sed:*)",
      "Bash(curl.exe:*)",
      "Bash(rm:*)",
      "Bash(if [ -n \"$TELEGRAM_BOT_TOKEN\" ])",
      "Bash(if [ -n \"$TELEGRAM_CHAT_ID\" ])",
      "Bash(findstr:*)",
      "Bash(\"C:/dev/chatbot_project/ngrok.exe\" version)",
      "Bash(./ngrok.exe version:*)",
      "Bash(./ngrok.exe http:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python scripts/create_research_build113_run.py:*)",
      "Bash(PYTHONUTF8=1 sqlite3:*)",
      "Bash(netstat:*)",
      "Bash(for phase_id in build112-phase3-deep-retrieval-validation build112-phase4-second-opinion-testing build112-phase5-evidence-request-integration build112-phase5-dashboard-pause-resume)",
      "Bash(do)",
      "Bash(PYTHONUTF8=1 DATABASE_URL=\"sqlite:///autopack.db\" PYTHONPATH=src python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" timeout 120 python:*)",
      "Bash(AUTO_APPROVE_BUILD113=false PYTHONUTF8=1 python:*)",
      "Bash(env)",
      "Bash(for f in import_graph risk_scorer context_summarizer scope_refiner)",
      "Bash(do test:*)",
      "Bash(PYTHONUTF8=1 DATABASE_URL=\"sqlite:///autopack.db\" python scripts/break_glass_repair.py:*)",
      "Bash(PYTHONUTF8=1 DATABASE_URL=\"sqlite:///autopack.db\" PYTHONPATH=src python -c:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" timeout 600 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" timeout 300 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python -c \"from autopack.database import SessionLocal; from autopack.models import Phase; session = SessionLocal\\(\\); phases = session.query\\(Phase\\).filter\\(Phase.run_id == ''build130-schema-validation-prevention''\\).all\\(\\); print\\(f''BUILD-130 phases:''\\); [print\\(f''  {p.phase_id}: {p.state}, deliverables={len\\(\\(p.scope or {}\\).get\\(\"\"deliverables\"\", []\\)\\)}''\\) for p in phases]; session.close\\(\\)\")",
      "Bash(PYTHONUTF8=1 wc:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src TELEMETRY_DB_ENABLED=1 DATABASE_URL=\"sqlite:///autopack.db\" python:*)",
      "Bash(TELEMETRY_DB_ENABLED=1 PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" timeout 600 python:*)",
      "Bash(set PYTHONUTF8=1)",
      "Bash(set PYTHONPATH=src)",
      "Bash(set DATABASE_URL=sqlite:///autopack.db)",
      "Bash(TELEMETRY_DB_ENABLED=1 PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" timeout 300 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python -m pytest:*)",
      "Bash(TELEMETRY_DB_ENABLED=1 PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" AUTOPACK_API_URL=\"http://localhost:8000\" timeout 600 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" timeout 60 python -m pytest:*)",
      "Bash(PYTHONUTF8=1 DATABASE_URL=\"sqlite:///autopack.db\" python scripts/migrations/add_telemetry_features.py:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_fullrun.db\" python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src TELEMETRY_DB_ENABLED=1 AUTOPACK_SKIP_CI=1 DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_fullrun.db\" python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_fullrun.db\" python -c \"\nfrom autopack.database import SessionLocal\nfrom autopack.models import Phase, PhaseState\n\nsession = SessionLocal\\(\\)\nphases = session.query\\(Phase\\).filter\\(Phase.run_id == ''telemetry-collection-v4''\\).all\\(\\)\nprint\\(f''Total phases: {len\\(phases\\)}''\\)\nfor p in phases:\n    print\\(f''  {p.phase_id}: {p.state}''\\)\nsession.close\\(\\)\n\")",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src TELEMETRY_DB_ENABLED=1 AUTOPACK_SKIP_CI=1 DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_fullrun.db\" timeout 600 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src TELEMETRY_DB_ENABLED=1 AUTOPACK_SKIP_CI=1 AUTOPACK_API_URL=\"http://127.0.0.1:8123\" DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_fullrun.db\" timeout 600 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///:memory:\" python -m pytest:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v5.db\" python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v5.db\" TELEMETRY_DB_ENABLED=1 AUTOPACK_SKIP_CI=1 timeout 7200 python scripts/batch_drain_controller.py --run-id telemetry-collection-v5 --batch-size 25 --phase-timeout-seconds 900 --max-total-minutes 120)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v5.db\" python -c \"\nfrom autopack.database import SessionLocal\nfrom autopack.models import Phase, PhaseState\ns=SessionLocal\\(\\)\nphases = s.query\\(Phase\\).filter\\(Phase.run_id==''telemetry-collection-v5''\\).all\\(\\)\nprint\\(f''Phase states:''\\)\nfor state in [PhaseState.QUEUED, PhaseState.EXECUTING, PhaseState.COMPLETE, PhaseState.FAILED]:\n    count = sum\\(1 for p in phases if p.state == state\\)\n    print\\(f''  {state.value}: {count}''\\)\ns.close\\(\\)\n\")",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v5.db\" TELEMETRY_DB_ENABLED=1 AUTOPACK_SKIP_CI=1 timeout 7200 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v5.db\" python -c:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src TELEMETRY_DB_ENABLED=1 AUTOPACK_SKIP_CI=1 DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v5.db\" timeout 600 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v5.db\" python scripts/analyze_token_telemetry_v3.py:*)",
      "Bash(set \"TELEMETRY_DB_ENABLED=1\")",
      "Bash(set \"AUTOPACK_SKIP_CI=1\")",
      "Bash(set \"DATABASE_URL=sqlite:///C:/dev/Autopack/telemetry_seed_v6_pilot.db\")",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src TELEMETRY_DB_ENABLED=1 AUTOPACK_SKIP_CI=1 DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v6_pilot.db\" python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v6_pilot.db\" python:*)",
      "Bash($env:PYTHONUTF8=\"1\")",
      "Bash($env:PYTHONPATH=\"src\")",
      "Bash($env:TELEMETRY_DB_ENABLED=\"1\")",
      "Bash($env:AUTOPACK_SKIP_CI=\"1\")",
      "Bash($env:DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v5.db\")",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src TELEMETRY_DB_ENABLED=1 AUTOPACK_SKIP_CI=1 DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v5.db\" python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src TELEMETRY_DB_ENABLED=1 DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v5.db\" python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///C:/dev/Autopack/telemetry_seed_v5.db\" python -c \"from autopack.database import SessionLocal; from autopack.models import Run, Tier, Phase; s=SessionLocal\\(\\); rid=''telemetry-collection-v7''; s.query\\(Phase\\).filter\\(Phase.run_id==rid\\).delete\\(synchronize_session=False\\); s.query\\(Tier\\).filter\\(Tier.run_id==rid\\).delete\\(synchronize_session=False\\); s.query\\(Run\\).filter\\(Run.id==rid\\).delete\\(synchronize_session=False\\); s.commit\\(\\); s.close\\(\\); print\\(''Deleted run ''+rid\\)\")",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python scripts/create_run_from_json.py:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" timeout 7200 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" timeout 3600 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python -m autopack.autonomous_executor:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///:memory:\" pytest:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///:memory:\" python:*)",
      "Bash(PYTHONUTF8=1 DATABASE_URL=\"sqlite:///autopack.db\" python scripts/migrations/add_phase6_p3_fields.py:*)",
      "Bash(PYTHONUTF8=1 DATABASE_URL=\"sqlite:///autopack.db\" python:*)",
      "Bash(PYTHONUTF8=1 DATABASE_URL=\"sqlite:///autopack.db\" python scripts/pattern_expansion.py:*)",
      "Bash(PYTHONPATH=src timeout 10 python:*)",
      "Bash(PYTHONUTF8=1 DATABASE_URL=\"sqlite:///autopack.db\" PYTHONPATH=src timeout 10 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///test_canonical.db\" pytest:*)",
      "Bash(if [ -d \"tests/backend\" ])",
      "Bash(PYTHONUTF8=1 awk:*)",
      "Bash(PYTHONUTF8=1 head:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///:memory:\" timeout 360 pytest:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///:memory:\" timeout 60 pytest:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///:memory:\" timeout 120 pytest:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///:memory:\" timeout 180 pytest:*)",
      "Bash(for file in tests/autopack/test_context_budgeter_extended.py tests/autopack/test_error_recovery_extended.py tests/autopack/test_governance_requests_extended.py tests/autopack/test_telemetry_unblock_fixes.py tests/autopack/test_token_estimator_calibration.py)",
      "Bash(for file in test_context_budgeter_extended test_error_recovery_extended test_governance_requests_extended test_telemetry_unblock_fixes)",
      "Bash(do echo -n \"$file: \")",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///:memory:\" timeout 90 pytest:*)",
      "Bash(if [ -d \"C:/Program Files \\(x86\\)/Steam/steamapps/common\" ])",
      "Bash(du:*)",
      "Bash(if [ -d \"C:/Program Files/Steam/steamapps/common\" ])",
      "Bash(if [ -d \"$USERPROFILE/Program Files \\(x86\\)/Steam/steamapps/common\" ])",
      "Bash(touch:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src timeout 300 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///:memory:\" timeout 60 python -m pytest:*)",
      "Bash(PYTHONUTF8=1 powershell:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" timeout 60 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python scripts/storage/scan_and_report.py:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python scripts/storage/learn_patterns.py:*)",
      "Bash(for dir in */)",
      "Bash(do mv \"$dir\" \"../../$dir\")",
      "Bash(PYTHONUTF8=1 DATABASE_URL=\"sqlite:///autopack.db\" python scripts/migrations/add_execution_checkpoints.py:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///autopack.db\" python scripts/migrations/add_sot_retrieval_telemetry_build155.py:*)",
      "Bash(PYTHONUTF8=1 cd:*)",
      "Bash(pip-compile:*)",
      "Bash(PYTHONUTF8=1 pip-compile:*)",
      "Bash(for dir in telemetry-collection-v*/)",
      "Bash(do du -sh \"$dir\")",
      "Bash(PYTHONUTF8=1 timeout 300 python:*)",
      "Bash(powershell:*)",
      "Bash(PYTHONUTF8=0 python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///test_sot_sync.db\" python:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src timeout 60 python -m pytest:*)",
      "Bash(git check-ignore:*)",
      "Bash(PYTHONUTF8=1 tee:*)",
      "Bash(rg:*)",
      "Bash(wc:*)",
      "Bash(git merge:*)",
      "Bash($env:PYTHONUTF8='1')",
      "Bash($env:PYTHONPATH='src')",
      "Bash($env:DATABASE_URL='sqlite:///:memory:')",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src timeout 60 pytest:*)",
      "Bash(PYTHONUTF8=1 PYTHONPATH=src DATABASE_URL=\"sqlite:///:memory:\" timeout 300 pytest:*)",
      "Bash(gh pr create --title \"feat: Add PR approval pipeline with Telegram integration\" --body \"$\\(cat <<''EOF''\n## Summary\n\nImplements `IMPLEMENTATION_PLAN_PR_APPROVAL_PIPELINE.md` exactly as specified, with **no design changes**.\n\nThis PR adds a post-run PR creation workflow with Telegram approval, ensuring:\n- **Never runs in CI** \\(read-only\\)\n- **Never auto-merges** \\(merge is separate, manual step\\)\n- **Opt-in only** \\(`AUTOPACK_ENABLE_PR_APPROVAL=true` required\\)\n- **Run-local artifacts** under `RunFileLayout`\n\n## Changes\n\n### New Modules\n- **`src/autopack/pr/proposal_artifacts.py`**: `PrProposal` dataclass & run-local storage \\(`<run_base>/pr/proposal.{json,md}`\\)\n- **`src/autopack/pr/git_inspection.py`**: Deterministic git helpers \\(`get_diff_stats`, `ensure_branch`, `commit_all`\\)\n- **`scripts/pr/propose_and_create_pr.py`**: Post-run command for PR creation workflow\n\n### Extensions\n- **`src/autopack/notifications/telegram_notifier.py`**: Added `send_pr_approval_request\\(\\)` with inline buttons \\(`pr_approve:{approval_id}`, `pr_reject:{approval_id}`\\)\n- **`src/autopack/main.py`**: Extended `POST /telegram/webhook` to handle PR callbacks via `_handle_pr_callback\\(\\)` helper\n\n### Tests\n- **`tests/autopack/test_pr_proposal_artifacts.py`**: Proposal serialization, storage roundtrip, markdown formatting\n- **`tests/autopack/test_telegram_webhook_pr_callbacks.py`**: Webhook callback handling, idempotence, collision avoidance\n\n## Key Contracts Enforced\n\nâœ… **Opt-in only**: Requires `AUTOPACK_ENABLE_PR_APPROVAL=true`  \nâœ… **Never runs in CI**: Script is post-run, local only  \nâœ… **Never auto-merges**: Merge is separate manual step  \nâœ… **Run-local artifacts**: All under `RunFileLayout`  \nâœ… **Telegram inline buttons**: Approve/Reject via `callback_data`  \nâœ… **Approval by ID**: Uses `approval_id`, not `phase_id`, avoiding collisions  \nâœ… **Idempotent**: Checks for existing PRs via `gh pr list --head <branch>`  \nâœ… **Fail-safe**: Graceful degradation if Telegram/API unreachable  \n\n## Usage Example\n\n```bash\n# Enable PR approval pipeline\nexport AUTOPACK_ENABLE_PR_APPROVAL=true\n\n# After a successful run completes\nPYTHONUTF8=1 python scripts/pr/propose_and_create_pr.py \\\\\n  --run-id build123-feature \\\\\n  --branch feat/my-feature \\\\\n  --title \"Add new feature\" \\\\\n  --summary \"This PR adds...\" \\\\\n  --risk-score 35 \\\\\n  --api-url http://localhost:8000\n```\n\n## Pre-Merge Checklist\n- [ ] CI must be green\n- [ ] All tests pass \\(`test_pr_proposal_artifacts.py`, `test_telegram_webhook_pr_callbacks.py`\\)\n- [ ] SOT write protection check passes \\(`python scripts/check_sot_write_protection.py`\\)\n- [ ] Review routing snapshot \\(no unintended overrides\\)\n\n## References\n- Implementation plan: `docs/IMPLEMENTATION_PLAN_PR_APPROVAL_PIPELINE.md`\n- README principle: \"safe, intention-first, mechanically enforceable\"\n\nðŸ¤– Generated with [Claude Code]\\(https://claude.com/claude-code\\)\nEOF\n\\)\" --base main)",
      "Bash(gh pr checks:*)",
      "Bash(gh run view:*)",
      "Bash(gh run list:*)",
      "Bash(gh api:*)",
      "Bash(gh pr create:*)",
      "Bash(git cherry-pick:*)",
      "Bash(gh pr close:*)",
      "Bash(ruff check:*)",
      "Bash(black:*)",
      "Bash(PYTHONUTF8=1 pytest:*)"
    ],
    "deny": [],
    "ask": []
  }
}
