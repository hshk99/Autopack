faiss library not installed; FaissStore will use in-memory fallback
[2025-12-26 02:16:41] INFO: [LOCK] Acquired executor lock for run_id=p10-validation-test (PID=113688, host=Harry)
[2025-12-26 02:16:41] INFO: Applying pre-emptive encoding fix...
[2025-12-26 02:16:41] INFO: [Recovery] Fixing Unicode encoding error...
[2025-12-26 02:16:41] INFO: [Recovery] SUCCESS: Encoding fixed (UTF-8 enabled)
[2025-12-26 02:16:41] INFO: Database tables initialized
[2025-12-26 02:16:41] INFO: Loaded BuilderOutputConfig: max_lines_for_full_file=1000, max_lines_hard_limit=1000
[2025-12-26 02:16:41] INFO: Doctor execute_fix enabled: True
[2025-12-26 02:16:41] INFO: FileSizeTelemetry initialized: .autonomous_runs\autopack\file_size_telemetry.jsonl
[2025-12-26 02:16:51] WARNING: [Qdrant] Connection check failed for localhost:6333: [WinError 10061] No connection could be made because the target machine actively refused it
[2025-12-26 02:16:52] WARNING: [MemoryService] Qdrant unavailable at localhost:6333; falling back to FAISS ([WinError 10061] No connection could be made because the target machine actively refused it)
[2025-12-26 02:16:52] INFO: [FAISS] Created collection 'code_docs' with dim=1536
[2025-12-26 02:16:52] INFO: [FAISS] Created collection 'run_summaries' with dim=1536
[2025-12-26 02:16:52] INFO: [FAISS] Created collection 'errors_ci' with dim=1536
[2025-12-26 02:16:52] INFO: [FAISS] Created collection 'doctor_hints' with dim=1536
[2025-12-26 02:16:52] INFO: [FAISS] Created collection 'planning' with dim=1536
[2025-12-26 02:16:52] INFO: [MemoryService] Initialized (backend=faiss, enabled=True, top_k=5)
[2025-12-26 02:16:52] INFO: MemoryService initialized (enabled=True)
[2025-12-26 02:16:52] INFO: [FileLayout] Project: autopack, Family: p10-validation-test, Base: .autonomous_runs\autopack\runs\p10-validation-test
[2025-12-26 02:16:52] INFO: Initialized autonomous executor for run: p10-validation-test
[2025-12-26 02:16:52] INFO: API URL: http://localhost:8000
[2025-12-26 02:16:52] INFO: Workspace: .
[2025-12-26 02:16:52] INFO: Running proactive startup checks from DEBUG_JOURNAL.md...
[2025-12-26 02:16:52] INFO: [HIGH] Checking: Windows Unicode Fix (PYTHONUTF8)
[2025-12-26 02:16:52] INFO:   Reason: Prevents UnicodeEncodeError with emoji characters in logs (Issue #3)
[2025-12-26 02:16:52] INFO:   Check PASSED
[2025-12-26 02:16:52] INFO: [SchemaValidator] Starting database schema validation...
[2025-12-26 02:16:52] INFO: [SchemaValidator] ✅ Database schema validation PASSED
[2025-12-26 02:16:52] INFO: Startup checks complete
[2025-12-26 02:16:53] INFO: [BUILD-123v2] Manifest generator initialized (deterministic scope generation)
[2025-12-26 02:16:55] INFO: [HealthCheck:T0] API Keys: PASSED (0ms) - All required API keys present
[2025-12-26 02:16:55] INFO: [HealthCheck:T0] Database: PASSED (1ms) - Database accessible: c:\dev\Autopack\autopack.db
[2025-12-26 02:16:55] INFO: [HealthCheck:T0] Workspace: PASSED (0ms) - Workspace valid: c:\dev\Autopack
[2025-12-26 02:16:55] INFO: [HealthCheck:T0] Config: PASSED (28ms) - Configuration files valid
[2025-12-26 02:16:55] INFO: [HealthCheck:T0] Vector Memory: PASSED (1259ms) - Qdrant unreachable at localhost:6333; autostart attempted or unavailable. Falling back to FAISS.
[2025-12-26 02:16:55] INFO: [BUILD-127] Completion authority initialized (PhaseFinalizer + TestBaselineTracker)
[2025-12-26 02:16:55] INFO: [BUILD-127] Capturing T0 baseline at commit 49fb08a3...
[2025-12-26 02:16:55] INFO: [Baseline] Using cached baseline for commit 49fb08a3
[2025-12-26 02:16:55] INFO: [BUILD-127] T0 baseline: 0 tests, 0 passing, 0 failing, 0 errors
[2025-12-26 02:16:55] INFO: Starting autonomous execution loop...
[2025-12-26 02:16:55] INFO: Poll interval: 10s
[2025-12-26 02:17:01] INFO: API server not detected at http://localhost:8000, attempting to start it...
[2025-12-26 02:17:01] INFO: Waiting for API server to start on localhost:8000...
[2025-12-26 02:17:04] INFO:   Still waiting... (1/10)
[2025-12-26 02:17:05] INFO: ✅ API server started successfully
[2025-12-26 02:17:05] INFO: Initializing infrastructure...
[2025-12-26 02:17:08] INFO: LlmService: Initialized with ModelRouter and UsageRecorder
[2025-12-26 02:17:08] INFO: Quality Gate: Initialized
[2025-12-26 02:17:08] INFO: Iteration 1: Fetching run status...
[2025-12-26 02:17:08] INFO: [BUILD-041] Next phase: research-foundation-intent-discovery
[2025-12-26 02:17:08] INFO: [BUILD-123v2] Phase 'research-foundation-intent-discovery' has no scope - generating manifest...
[2025-12-26 02:17:08] INFO: Generating manifest for run: p10-validation-test
[2025-12-26 02:17:08] INFO: Repo structure scanned successfully
[2025-12-26 02:17:08] INFO: [BUILD-123v2] Generated scope for 'research-foundation-intent-discovery': category=unknown, confidence=0.0%, files=0
[2025-12-26 02:17:08] WARNING: [BUILD-123v2] Low confidence (0.0%) for phase 'research-foundation-intent-discovery' - scope may be incomplete. Builder may need to request expansion.
[2025-12-26 02:17:08] INFO: [research-foundation-intent-discovery] Step 1/4: Generating code with Builder (via LlmService)...
[2025-12-26 02:17:08] INFO: [Context] Loaded 7 recently modified files for fresh context
[2025-12-26 02:17:09] INFO: [Context] Total: 17 files loaded for Builder context (modified=7, mentioned=0)
[2025-12-26 02:17:09] INFO: [TOKEN_BUDGET] Context loading: ~19996 tokens (99% of 20000 budget)
[2025-12-26 02:17:09] INFO: [research-foundation-intent-discovery] Loaded 17 files for context
[2025-12-26 02:17:09] INFO: [ModelSelector] Selected claude-sonnet-4-5 for builder (complexity=medium, attempt=0, intra_tier=0)
[2025-12-26 02:17:09] INFO: [MODEL-SELECT] Builder: model=claude-sonnet-4-5, complexity=medium->medium, attempt=0, category=None
[2025-12-26 02:17:09] WARNING: CONSOLIDATED_DEBUG.md not found at c:\dev\Autopack\.autonomous_runs\file-organizer-app-v1\archive\CONSOLIDATED_DEBUG.md
[2025-12-26 02:17:09] WARNING: [TOKEN_SOFT_CAP] run_id=unknown phase_id=research-foundation-intent-discovery est_total=37434 soft_cap=32000 (prompt=25966 completion=11468 complexity=medium)
[2025-12-26 02:17:13] INFO: HTTP Request: POST https://api.anthropic.com/v1/messages "HTTP/1.1 200 OK"
[2025-12-26 02:18:39] INFO: [TOKEN_BUDGET] phase=research-foundation-intent-discovery complexity=medium input=34921 output=7361/16384 total=42282 utilization=44.9% model=claude-sonnet-4-5
[2025-12-26 02:18:39] INFO: [Builder] Generated 4 file diffs locally from full-file content
[2025-12-26 02:18:39] INFO: [research-foundation-intent-discovery] Builder succeeded (42282 tokens)
[2025-12-26 02:18:39] INFO: [research-foundation-intent-discovery] No deliverables specified in scope, skipping validation
[2025-12-26 02:18:39] INFO: [research-foundation-intent-discovery] Step 2/5: Applying patch...
[2025-12-26 02:18:39] ERROR: Exception during patch application: Unsafe patch: attempts to create existing file as new: tests/test_source_discovery.py. Emit this change as a modification instead of 'new file mode'.
[2025-12-26 02:18:39] ERROR: [research-foundation-intent-discovery] Failed to apply patch to filesystem: Unsafe patch: attempts to create existing file as new: tests/test_source_discovery.py. Emit this change as a modification instead of 'new file mode'.
[2025-12-26 02:18:39] INFO: Updated phase research-foundation-intent-discovery status to FAILED
[2025-12-26 02:19:19] INFO: [MemoryService] Stored decision log
[2025-12-26 02:19:19] INFO: [RetrievalTrigger] Phase research-foundation-intent-discovery attempt 1: Error messages lack context - triggering deep retrieval
[2025-12-26 02:19:19] INFO: [DeepRetrieval] Starting bounded retrieval for phase research-foundation-intent-discovery (priority=medium)
[2025-12-26 02:19:20] INFO: [DeepRetrieval] Retrieved 0 run artifacts (0 bytes), 1 SOT files (15360 bytes), 0 memory entries (0 bytes)
[2025-12-26 02:19:20] WARNING: [research-foundation-intent-discovery] Attempt 1/5 failed, will escalate model for next retry
[2025-12-26 02:19:20] WARNING: Phase research-foundation-intent-discovery finished with status: PATCH_FAILED
[2025-12-26 02:19:20] INFO: Waiting 10s before next phase...
[2025-12-26 02:19:30] INFO: Iteration 2: Fetching run status...
[2025-12-26 02:19:30] INFO: No more executable phases, execution complete
[2025-12-26 02:19:30] INFO: Autonomous execution loop finished
[2025-12-26 02:19:30] INFO: [ARCHIVE_CONSOLIDATOR] Logged build event: RUN_COMPLETE
[2025-12-26 02:19:30] INFO: Learning Pipeline: Promoted 2 hints to persistent project rules
[2025-12-26 02:19:30] INFO: Learning Pipeline: Marked rules updated (total: 87 rules)
[2025-12-26 02:19:30] INFO: [PLANNING NOTICE] 2 new rules promoted. Future planning should incorporate 87 total project rules.
[2025-12-26 02:19:30] INFO: [LOCK] Released executor lock for run_id=p10-validation-test (PID=113688)
